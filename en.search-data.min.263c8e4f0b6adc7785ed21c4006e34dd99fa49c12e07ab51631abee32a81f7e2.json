[{"id":0,"href":"/docs/cloud-infrastructure/","title":"Cloud Infrastructure","section":"Docs","content":"Introduction #  Super dope content here!\n"},{"id":1,"href":"/docs/developer-ready-cloud/","title":"Developer Ready Cloud","section":"Docs","content":"Introduction #  Super dope content here!\n"},{"id":2,"href":"/docs/dr-migration/","title":"DR \u0026 Migration","section":"Docs","content":"Introduction #  Super dope content here!\n"},{"id":3,"href":"/docs/networking-security/","title":"Networking \u0026 Security","section":"Docs","content":"Introduction #  Super dope content here!\n"},{"id":4,"href":"/docs/cloud-infrastructure/planning/","title":"Planning and Preparation","section":"Cloud Infrastructure","content":"Planning and Preparation #  Your content comes here!\n"},{"id":5,"href":"/docs/developer-ready-cloud/planning/","title":"Planning and Preparation","section":"Developer Ready Cloud","content":"Planning and Preparation #  Your content comes here!\n"},{"id":6,"href":"/docs/dr-migration/planning/","title":"Planning and Preparation","section":"DR \u0026 Migration","content":"Planning and Preparation #  Your content comes here!\n"},{"id":7,"href":"/docs/networking-security/planning/","title":"Planning and Preparation","section":"Networking \u0026 Security","content":"Planning and Preparation #  Your content comes here!\n"},{"id":8,"href":"/docs/sovereign-cloud/planning/","title":"Planning and Preparation","section":"Sovereign Cloud","content":"Planning and Preparation #  Your content comes here!\n"},{"id":9,"href":"/docs/sovereign-cloud/","title":"Sovereign Cloud","section":"Docs","content":"Introduction #  Super dope content here!\n"},{"id":10,"href":"/docs/cloud-infrastructure/design/","title":"Design","section":"Cloud Infrastructure","content":"Design #  Your content comes here!\n"},{"id":11,"href":"/docs/developer-ready-cloud/design/","title":"Design","section":"Developer Ready Cloud","content":"Design #  Your content comes here!\n"},{"id":12,"href":"/docs/dr-migration/design/","title":"Design","section":"DR \u0026 Migration","content":"Design #  Your content comes here!\n"},{"id":13,"href":"/docs/networking-security/design/","title":"Design","section":"Networking \u0026 Security","content":"Design #  Your content comes here!\nRelative\nAbsolute\n"},{"id":14,"href":"/docs/sovereign-cloud/design/","title":"Design","section":"Sovereign Cloud","content":"Design #  Your content comes here!\n"},{"id":15,"href":"/docs/cloud-infrastructure/implementation/","title":"Implementation","section":"Cloud Infrastructure","content":"Implementation #  Welcome!\nConfiguring Cloud Director service for VMware Cloud on AWS #  See the instructions below on how to deploy VMware Cloud on AWS (VMConAWS) for multi-tenancy with VMware Cloud Director service.\nVMware Cloud Director Service for VMware Cloud on AWS Deployment Guide\n"},{"id":16,"href":"/docs/developer-ready-cloud/implementation/","title":"Implementation","section":"Developer Ready Cloud","content":"Implementation #  You content comes here!\n"},{"id":17,"href":"/docs/dr-migration/implementation/","title":"Implementation","section":"DR \u0026 Migration","content":"Implementation #  Welcome!\n"},{"id":18,"href":"/docs/networking-security/implementation/","title":"Implementation","section":"Networking \u0026 Security","content":"Implementation #  You content comes here!\n"},{"id":19,"href":"/docs/sovereign-cloud/implementation/","title":"Implementation","section":"Sovereign Cloud","content":"Implementation #  You content comes here!\n"},{"id":20,"href":"/docs/cloud-infrastructure/operations/","title":"Operations","section":"Cloud Infrastructure","content":"Operations #  vCenter Server Metering #  Usage Meter collects product usage information from all vCenter servers that are registered with Usage Meter.\nNote: Usage Meter does not traverse Enhanced Linked Mode, and it requires registering all vCenter servers, part of this mode, to meter their usage data.\nVMware Cloud Provider Program partners should utilize VCPP licenses for all servers used in the service delivery path or administration control plane. VMware perpetual licenses, including OEM versions, can only be utilized to support internal IT operations that are not part of service delivery. In addition, VMware perpetual licenses may not be used to support the management or operations of an environment utilized to host unaffiliated third parties. Virtual machines running on hosts with perpetual or demo license keys are metered by Usage Meter.\nConfiguration #  The Usage Meter administrator must configure the endpoint and credentials for each vCenter server to be metered using the Usage Meter web application.\nFeature Detection #  When metering vCenter, Usage Meter performs two types of usage collections: event-based and inventory collections.\nEvent history collections #  Usage meter subscribes to vCenter events to detect changes in a virtual machine and host state. Changes in a virtual machine state are delivered every hour to Usage Meter and recorded.\nNote: Usage Meter collects data from hosts and VMs in an active state. Even when there is a connectivity issue with a host, Usage Meter will still report metering data if the host VMs are in a powered-on state. This means that providers will be billed for VMs even when there are temporary interruptions in host connectivity. If providers want to be sure they are not being billed for VMs, they need to turn those VMs off.\nInventory collections #  Usage Meter queries vCenter servers every eight hours to collect full inventory information.\nvCenter Reporting #  The vCenter Server Standard edition is part of the Flex Core bundle and therefore reported as part of that bundle. vCenter usage is bundled by default and cannot be reported standalone.\n"},{"id":21,"href":"/docs/developer-ready-cloud/operations/","title":"Operations","section":"Developer Ready Cloud","content":"Operations #  API Tokens in Cloud Director #  VMware Cloud Director 10.3.1 introduced API Tokens. This allows a user to generate API tokens for programmatic access to VCD. It works for both, provider, and tenant users. An automation script or 3rd-party solution can then use the API token to make API requests to Cloud Director on behalf of the user.\nThese steps are used to create API tokens:\n The provider propagates the right to use and manage API token to the tenant The Cloud Director user (provider as well as tenant user) creates an API token An API client (e.g. an automation script) uses the API token to make requests (If needed) The user revokes the API token  Preparation #  As for most new features, fine-grained access control through rights bundles is possible. To enable a tenant to use API token, the provider must publish a rights bundle to the tenant. Privileges can be defined for a user to manage the user’s own tokens, and to manage all Organization user’s token (for example for an Organization Administrator).\nCreate the API Token #  As provider or tenant user with proper privileges you can use the “User Preferences” menu to create the API token. Each token can be labeled with a name. Be aware that the actual token key is only visible once in the creation wizard and cannot be retrieved afterwards.\nRevoke the API Token #  API tokens do not expire, but existing API tokens can be revoked. This also invalidates active API client sessions that used the token to authenticate. All users can revoke their own tokens. Administrators (those with \u0026lsquo;manage all user\u0026rsquo;s API tokens\u0026rsquo; right) can revoke other user\u0026rsquo;s tokens. Tenant administrators can do so within their own Organization, while system administrators can do so for any user.\nUse the API Token #  Semantically the API token usage follows the OAuth 2.0 specification (RFC 6749, section 6).\nThe API token can then be used by a 3rd-party solution or custom API client to access the VCD API as the user, without the need to authenticate with username and password credentials.\nAPI Client Example #  Request the bearer token for subsequent calls using the API token:\nPOST https://host_name/oauth/provider/token Accept: application/json Content-Type: application/x-www-form-urlencoded Body: grant\\_type=refresh\\_token\u0026amp;refresh\\_token=Generated\\_API_Token  Security note: It’s recommended to send the API Token as part of the request body (and not as part of the URL, even if that technically works for x-www-form-urlencoded type requests), to avoid it being logged in transit.\nResponse containing the Bearer token:\nHTTP/1.1 200 OK Content-Type: application/json Body: { \u0026quot;access\\_token\u0026quot;:\u0026quot;Generated\\_Access_Token\u0026quot;, \u0026quot;token_type\u0026quot;:\u0026quot;Bearer\u0026quot;, \u0026quot;expires_in\u0026quot;:86400, \u0026quot;refresh_token\u0026quot;:null }  Subsequent API call now can use the returned Bearer token in the \u0026ldquo;access_token\u0026rdquo; field as usual. There is no need for any changes in the client code.\nSubsequent Call using the Bearer token:\nGET https://host_name/api/org Accept: application/*+xml;version=36.1 Authorization: Bearer Generated\\_Access\\_Token  Notes #  The session expiration can be configured in the provider portal under General \u0026gt; Timeouts.\nThe VCD Provider for Terraform for example supports API Token authentication as of version 3.5:\nprovider \u0026quot;vcd\u0026quot; { user = \u0026quot;none\u0026quot; password = \u0026quot;none\u0026quot; auth\\_type = \u0026quot;api\\_token\u0026quot; api_token = Generated API token sysorg = \u0026quot;System\u0026quot; ...  For security reasons, certain tasks are not possible when authenticated through an API token:\n Change the user password Perform user management tasks Create more tokens View or revoke other tokens  When accessing VMware Cloud Director by using an API access token, applications have only view rights for the following resources.\n User Group Roles Global roles Rights bundles  The API Token feature in VMware Cloud Director offers a secure way for automation solutions to access its API, even in environments that enforce Multi-factor Authentication for user logins.\nReference links: #  VCD Tenant Portal Documentation: https://docs.vmware.com/en/VMware-Cloud-Director/10.3/VMware-Cloud-Director-Tenant-Portal-Guide/GUID-A1B3B2FA-7B2C-4EE1-9D1B-188BE703EEDE.html\nVCD Provider Portal Documentation: https://docs.vmware.com/en/VMware-Cloud-Director/10.3/VMware-Cloud-Director-Service-Provider-Admin-Portal-Guide/GUID-A1B3B2FA-7B2C-4EE1-9D1B-188BE703EEDE.html\nOAuth 2.0 Specification (RFC 6749): https://datatracker.ietf.org/doc/html/rfc6749#section-6\nVCD Provider for Terraform 3.5.1 Documentation: https://registry.terraform.io/providers/vmware/vcd/latest/docs\n"},{"id":22,"href":"/docs/dr-migration/operations/","title":"Operations","section":"DR \u0026 Migration","content":"Operations #  Concent comes here \\o/\n"},{"id":23,"href":"/docs/networking-security/operations/","title":"Operations","section":"Networking \u0026 Security","content":"Operations #  Your content comes here!\n"},{"id":24,"href":"/docs/sovereign-cloud/operations/","title":"Operations","section":"Sovereign Cloud","content":"Operations #  Your content comes here!\n"},{"id":25,"href":"/docs/cloud-infrastructure/cds-vmc-deployment-guide-msp/","title":"Cds Vmc Deployment Guide Msp","section":"Cloud Infrastructure","content":"VMware Cloud Director Service for VMware Cloud on AWS Deployment Guide #  VMware Cloud Director™ service enables cloud providers to use VMware Cloud on AWS in multi-tenant modality with enhanced VMware NSX-T support, allowing provisioning of custom-sized, tenant-based, isolated, and secure VMware Cloud resources. This ability to service multiple smaller and medium sized tenants on the same infrastructure, offers flexibility to right-size the VMware Cloud on AWS environments to meet customer needs and requirements of all customer tiers.\nVMware Cloud Director service is a container-based SaaS version of the proven VMware Cloud Director on-premises service-delivery platform. The service, available through VMware Cloud Partner Navigator, helps cloud providers gain better economies of scale and generate new value and revenue for their cloud businesses.\nThis guide details the process of deploying a VMware Cloud Director service Instance, associating it with a VMware Cloud on AWS SDDC designed for use with VMware Cloud Director service, configuring the Provider Virtual Datacenter to use the resources of the associated VMware Cloud on AWS SDDC, configuring the VMware Cloud on AWS SDDC networking to prepare it for multi-tenant use and deploying the first tenant organization.\nBefore using this guide, it is necessary to join the VMware Managed Service Provider Program and have the require contracts in place to use the VMware Cloud services mentioned in this guide. See the MSP VMware Cloud on AWS Operations Handbook and the Cloud Director service Operations Handbook for more details.\nPrepare a VMware Cloud Partner Navigator Provider Organization #  Provision a new VMware Cloud Partner Navigator Organization\n  Click on Administration, then Add Organization\n  Fill out the Add Organization form and click Add Organization\nRequest access to VMware Cloud Director service by emailing: ask_cloud_director_service@VMware.com\n  Supply the Long ID of the Organization that will be used.\n  A onetime use invitation will be returned to activate VMware Cloud Director service.\nEnable the VMware Cloud on AWS and VMware Cloud Director service services in the new Organization\n  Select the new Provider Organization and click Manage Services\n  Click Continue\n  Click Open on both service tiles to activate the services   Click Open to continue\n  NOTE: It is also acceptable to use an existing Provider Organization enabled for VMware Cloud on AWS [which has no SDDCs currently deployed.]{.underline}\nDeploy a SDDC #  Deploy the SDDC in the same VMware Cloud Partner Navigator Organization activated above.\n  Select the VMware Cloud on AWS service tile   Select SDDCs and click Create SDDC\n  Fill out the form to deploy the SDDC according to your requirements. For more details about the deployment process for VMware Cloud on AWS SDDCs see Deploy an SDDC from the VMC Console.\n  NOTE: All VMware Cloud on AWS SDDCs used with VMware Cloud Director service must be deployed in Organizations that have been enabled for VMware Cloud Director service. SDDCs deployed in other Organizations are not compatible with VMware Cloud Director service.\nDeploy VMware Cloud Director service Instance #    Select the VMware Cloud Director service tile  If someone other than the Organization Owner will be deploying VMware Cloud Director service Instances the Organization Owner must first establish a trust relationship between VMware Cloud services and VMware Cloud Director service.\na. In the Cloud Director Instances screen select Configuration then Configure OAuth Trust Relationshipb. Select Dismiss once the trust is established\n![Graphical user interface, text, application Description automatically generated](../../../static/images/cloud-infrastructure-cds-vmc/cloud-infrastructure-cds-vmc12.png)    Select Create Instance to begin the instance deployment process.   Enter the data needed in the form and click on NEXT\n  Note: For the Upgrade Category, selecting Preview (if enabled) identifies this Cloud Director service Instance to be patched or upgraded earlier than when Production is selected. Use Preview for service development environments. The Upgrade Category cannot be changed after deployment.\n Acknowledge costs and then click on CREATE INSTANCE\n  Click on Activity Log for detailed information about the deployment progress.\n  When theÂ VMware Cloud DirectorÂ instance deployment is complete, its card displays aÂ ReadyÂ status.\nGenerate API Token #  An API token for the Organization holding the SDDC is used to associate the SDDC with VMware Cloud Director service.\n  Click on your name in the top right and then click on My Account\n  Click on API Tokens\n  Click on GENERATE TOKEN\n  Enter form fields and then click on GENERATE\n  Notes: This token is only used during the association process, so its Token TTL should be short. Minimum required Organization Role is Organization Member. Minimum required Service Roles are VMware Cloud on AWS - Administrator and VMware Cloud on AWS - NSX Cloud Admin. Make sure to store the generated token in a safe place.\nCreate a DHCP Network #  Need to create a network segment that has routed access to the SDDC management network, provides DHCP service and has a DNS server configured. Note: This step can be skipped if you only have one host in your SDDC.\n  Click on ADD SEGMENT\n  Enter segment details and then click on SET DHCP CONFIG\n  Enter details and then click on APPLY\n  Click SAVE\n  S3 Configuration #  If your SDDC is in Oregon (us-west-2), you will need to either disable S3 or configure a S3 VPC endpoint prior to associating the SDDC. If your SDDC is in any other region, this step can be skipped. By default, S3 traffic in the local region fails until either a VPC endpoint is configured or S3 is disabled. Part of the associate process automatically deploys a proxy appliance into the SDDC. That proxy appliance currently is stored on an S3 bucket in Oregon (us-west-2), which given the default configuration makes it inaccessible.\nDisable S3 #   Click DISABLE\n  Configure S3 VPC endpoint #  See the Amazon Virtual Private Cloud AWS PrivateLink documentation: Endpoints for Amazon S3\nAssociate VMware Cloud Director service Instance #    Click Associate a VMC SDDC\n  Enter fields and then click on ASSOCIATE a VMC SDDC\n  Note: If you only have one host in your SDDC, you can use the predefined network named \u0026ldquo;sddc-cgw-network-1\u0026rdquo; for the Proxy VM Network field.\nAssociate Custom Domain (Optional) #  Allows the provider to use their own domain name for VMware Cloud Director service Instances.\n  Click on ACTIONS and then click on Associate Custom Domain\nSee the VMware Cloud Director service documentation Customize the DNS and Certificate Settings for more details.\n  VMware Cloud Director service Instance Configuration #  Launch the Provider Portal #    To use VMware Cloud Services as an Identity Provider for VMware Cloud Director service Instances, select Configure VMware Cloud Services as instance IDP from the Actions menu of each VMware Cloud Director service Instance.   Select Configure IDP\n  Click on OPEN INSTANCE\n  NOTE: To control user access when VMware Cloud Services is used as the VMware Cloud Director service Instance IDP, use the Role Assignment feature in VMware Cloud Partner Navigator to grant users Admin, Read Only or No Access roles to all IDP enabled VMware Cloud Director service Instances. The Admin role will login to instances with the CDS Provider Admin role. The Read Only role will login to instances with the CDS Provider Admin Read Only role.\nCreate Provider VDC #    Click on NEW\n  Enter details and then click on NEXT\n  Select vCenter and then click on NEXT\n  Select Resource Pool, Hardware version and then click on NEXT\n  Select the VMC Workload Storage Policy \u0026ndash; Cluster-1 and then click on NEXT.   Note: Make sure that the other storage policies are left unselected.\n Select NSX-T manager and Geneve Network pool and then click on Next.\n  Click on FINISH\n  Update External Network with valid IP range #    Click on Tier-0 Gateways in the left pane and then click the name of the pre-existing External Network.\n  Click on Network specification and then Edit.\n  Delete existing network spec by selecting it and then clicking on DELETE\n  Click on NEW\n  Enter Gateway CIDR and click on the pencil.\n  Note: We recommended that you use a subnet in the 100.64.0.0/10 range (RFC-6598 \u0026ndash; Carrier-grade NAT) to avoid conflicts with RFC-1918 private address space used in on premises locations and allow for extensive NATing of tenant IPs to the External Network. For example, you may choose 100.68.1.1/24 for the first SDDC deployed and use 100.68.2.1/24 for the second SDDC and so on. It is important to note that NSX-T uses 100.64.0.0/16 for T0-T1 interlink and is not available for use in an NSX-T environment like VMware Cloud on AWS.\n Enter Static IP Pools, click ADD and then click on SAVE\n  Click on **Save\n**  Create Inventory Group for External Networks #    Click Add Group\n  Enter Name and click on Set Members\n  Click on IP Addresses, enter the range associated with the external network previously specified and then click on APPLY\n  Click on SAVE\n  Create Firewall Rule to Allow VMware Cloud Director service Tenant Traffic #    Click Add Rule\n  Add rule details and then click on PUBLISH.\n  Notes: For Sources, make sure to select the Group created previously (VMware Cloud Director service External Network Ips). For Applied To, make sure to select Internet Interface.\nCreate First Tenant #  Create Organization #   Click on New  Fill in details and click on CREATE\n  Create Organization VDC #    Click on NEW\n  Fill in General details and click NEXT\n  Select Organization and click NEXT\n  Select Provider VDC and click NEXT\n  Select Allocation Model and click NEXT\n  Enter details and click NEXT\n  Select Storage Policy and click NEXT\n  Note: Thin provisioning and Fast provisioning are recommended, but not required.\n Select Network Pool and click NEXT\n  Confirm and click FINISH\n  Create Edge Gateway #    Click on NEW\n  Select Organization VDC and click on NEXT\n  Enter Name and click on NEXT\n  Select External Network and click on NEXT\n  Select Edge Cluster and click on NEXT\n  Add IP Allocation, click ADD, then click on NEXT\n  Review and click FINISH\n  Request a public IP for Tenant\u0026rsquo;s edge #    Click REQUEST NEW IP\n  Enter Notes and then click SAVE\n  Create a NAT pointing to the tenant\u0026rsquo;s edge gateway #    Click on ADD NAT RULE.\n  Select previously created public IP and make sure that the Internal IP matches the IP assigned to the edge gateway.\n  Click SAVE\n  Create Organization network #    Open Tenant portal by click on the box with the arrow next to the selected organization\n  Click on NEW\n  Select Scope and then click NEXT\n  Select Routed and then click NEXT\n  Select edge and the click NEXT\n  Enter name and CIDR and then click on NEXT\n  Enter Static IP Pool and then click on NEXT\n  Enter DNS and then click on NEXT  Review and click FINISH\n  Create SNAT to allow outbound traffic #    Select proper edge gateway and then under NAT click on NEW\n  Enter SNAT information and then click on SAVE.\n  Note: Make sure External IP is on the Edge and that the Internal IP matches the org network subnet\nConclusion #  At this point, the VMware Cloud Director service Instance is ready to deploy tenant VMs. For more information see the documentation for VMware Cloud on AWS, VMware Cloud Director service and VMware Cloud Director.\n"}]