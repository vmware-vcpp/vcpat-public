<!doctype html><html lang=en-us dir=ltr>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Networking and Security Design for VMware Cloud Director on VMware Cloud Foundation #  Network Design for VMware Cloud Foundation #  VMware NSX provides networking services for infrastructure management components and workloads in VMware Cloud Foundation such as load balancing, routing and virtual networking. [Read more]
Network Design for VMware Cloud Director #  For secure access to the UI and API of VMware Cloud Director, the Primary and Secondary Cells are placed on cross-instance NSX segments.">
<meta name=theme-color content="#FFFFFF">
<meta name=color-scheme content="light dark"><meta property="og:title" content="Networking and Security Design for VMware Cloud Director on VMware Cloud Foundation">
<meta property="og:description" content="Networking and Security Design for VMware Cloud Director on VMware Cloud Foundation #  Network Design for VMware Cloud Foundation #  VMware NSX provides networking services for infrastructure management components and workloads in VMware Cloud Foundation such as load balancing, routing and virtual networking. [Read more]
Network Design for VMware Cloud Director #  For secure access to the UI and API of VMware Cloud Director, the Primary and Secondary Cells are placed on cross-instance NSX segments.">
<meta property="og:type" content="article">
<meta property="og:url" content="http://vcpat.cloudhappens.io/docs/networking-security/logical-design/"><meta property="article:section" content="docs">
<meta property="article:modified_time" content="2023-11-01T08:52:28+02:00">
<title>Networking and Security Design for VMware Cloud Director on VMware Cloud Foundation | VMware Cloud Provider Architecture Toolkit</title>
<link rel=manifest href=/manifest.json>
<link rel=icon href=/favicon.png type=image/x-icon>
<link rel=stylesheet href=/book.min.82c5dbd23447cee0b4c2aa3ed08ce0961faa40e1fa370eee4f8c9f02e0d46b5f.css integrity="sha256-gsXb0jRHzuC0wqo+0Izglh+qQOH6Nw7uT4yfAuDUa18=" crossorigin=anonymous>
<script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.842bbcaa96a465f1ee2b49cb43abc550e0bfd109862432943e8b5ec52de5cbb9.js integrity="sha256-hCu8qpakZfHuK0nLQ6vFUOC/0QmGJDKUPotexS3ly7k=" crossorigin=anonymous></script>
</head>
<body dir=ltr>
<input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control>
<main class="container flex">
<aside class=book-menu>
<div class=book-menu-content>
<nav>
<h2 class=book-brand>
<a class="flex align-center" href=/><span>VMware Cloud Provider Architecture Toolkit</span>
</a>
</h2>
<div class=book-search>
<input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/>
<div class="book-search-spinner hidden"></div>
<ul id=book-search-results></ul>
</div>
<ul>
<li><a href=/feedback/><em>Feedback</em></a></li>
</ul>
<h2 id=draft-validated-solutions>
Draft Validated Solutions:
<a class=anchor href=#draft-validated-solutions>#</a>
</h2>
<ul>
<li><a href=/docs/cloud-infrastructure/><strong>Cloud Infrastructure</strong></a>
<ul>
<li><a href=/docs/cloud-infrastructure/planning/>Planning and Preparation</a></li>
<li><a href=/docs/cloud-infrastructure/design/>Design Objectives</a></li>
<li><a href=/docs/cloud-infrastructure/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/cloud-infrastructure/implementation/>Implementation</a></li>
<li><a href=/docs/cloud-infrastructure/operations/>Operational Guidance</a></li>
<li><a href=/docs/cloud-infrastructure/design-decisions/>Design Decisions</a></li>
<li><a href=/docs/cloud-infrastructure/solution-interop/>Solution Interoperability</a></li>
<li><a href=/docs/cloud-infrastructure/appendix/>Appendix</a></li>
</ul>
</li>
<li><a href=/docs/dr-migration/><strong>DR and Migration</strong></a>
<ul>
<li><a href=/docs/dr-migration/planning/>Planning and Preparation</a></li>
<li><a href=/docs/dr-migration/design/>Design Objectives</a></li>
<li><a href=/docs/dr-migration/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/dr-migration/implementation/>Implementation</a></li>
<li><a href=/docs/dr-migration/operations/>Operational Guidance</a></li>
</ul>
</li>
<li><a href=/docs/developer-ready-cloud/><strong>Developer Ready Cloud</strong></a>
<ul>
<li><a href=/docs/developer-ready-cloud/planning/>Planning and Preparation</a></li>
<li><a href=/docs/developer-ready-cloud/design/>Design Objectives</a></li>
<li><a href=/docs/developer-ready-cloud/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/developer-ready-cloud/implementation/>Implementation</a></li>
<li><a href=/docs/developer-ready-cloud/operations/>Operational Guidance</a></li>
</ul>
</li>
<li><a href=/docs/sovereign-cloud/><strong>Sovereign Cloud</strong></a>
<ul>
<li><a href=/docs/sovereign-cloud/planning/>Planning and Preparation</a></li>
<li><a href=/docs/sovereign-cloud/design/>Design Objectives</a></li>
<li><a href=/docs/sovereign-cloud/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/sovereign-cloud/implementation/>Implementation</a></li>
<li><a href=/docs/sovereign-cloud/operations/>Operational Guidance</a></li>
</ul>
</li>
</ul>
<h2 id=toolkit-documents>
Toolkit Documents:
<a class=anchor href=#toolkit-documents>#</a>
</h2>
<ul>
<li><strong>VMware Cloud Provider Lifecycle Manager</strong></li>
<li><a href=/docs/cloud-director/><strong>VMware Cloud Director</strong></a>
<ul>
<li>Automation</li>
<li>Branding & Themes</li>
<li>Extensibility</li>
<li><a href=/docs/cloud-director/identity-access/>Identity & Access</a></li>
<li>Multi-site</li>
<li>Networking</li>
<li>Scale</li>
<li>Security</li>
</ul>
</li>
<li><strong>VMware Cloud Director service</strong>
<ul>
<li><a href=/docs/cloud-director-service/implementation/>Implementation</a></li>
</ul>
</li>
<li><strong>VMware Cloud Director Availability</strong></li>
<li><strong>VMware vCloud Usage Meter</strong></li>
<li><strong>VMware Cloud Director Container Service Extension</strong></li>
<li><strong>VMware Cloud Director Oject Storage Extension</strong></li>
<li><strong>VMware Cloud Director Application Launchpad</strong>
<br></li>
</ul>
<ul>
<li>
<a href=https://cloudsolutions.vmware.com target=_blank rel=noopener>
VMware Cloud Solutions
</a>
</li>
</ul>
</nav>
<script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>
</div>
</aside>
<div class=book-page>
<header class=book-header>
<div class="flex align-center justify-between">
<label for=menu-control>
<img src=/svg/menu.svg class=book-icon alt=Menu>
</label>
<strong>Networking and Security Design for VMware Cloud Director on VMware Cloud Foundation</strong>
<label for=toc-control>
</label>
</div>
</header>
<article class=markdown><h1 id=networking-and-security-design-for-vmware-cloud-director-on-vmware-cloud-foundation>
Networking and Security Design for VMware Cloud Director on VMware Cloud Foundation
<a class=anchor href=#networking-and-security-design-for-vmware-cloud-director-on-vmware-cloud-foundation>#</a>
</h1>
<h2 id=network-design-for-vmware-cloud-foundation>
Network Design for VMware Cloud Foundation
<a class=anchor href=#network-design-for-vmware-cloud-foundation>#</a>
</h2>
<p>VMware NSX provides networking services for infrastructure management components and workloads in VMware Cloud Foundation such as load balancing, routing and virtual networking. <a href=https://docs.vmware.com/en/VMware-Cloud-Foundation/5.0/vcf-design/GUID-A7EFAC2B-4C36-4D54-A199-F448E7C3890E.html>[Read more]</a></p>
<h2 id=network-design-for-vmware-cloud-director>
Network Design for VMware Cloud Director
<a class=anchor href=#network-design-for-vmware-cloud-director>#</a>
</h2>
<p>For secure access to the UI and API of VMware Cloud Director, the Primary and Secondary Cells are placed on cross-instance NSX segments.</p>
<p><strong>Network Design of VMware CLoud Director Deployment on Overlay-Backed NSX Segments</strong></p>
<p><img src=/images/networking-security/01-ci-network-logical-design.png alt="Logical design"></p>
<h2 id=network-segments>
Network Segments
<a class=anchor href=#network-segments>#</a>
</h2>
<p>The network segment design consists of characteristics and decisions for placement of the VMware Cloud Director in the VMware Cloud Foundation Management domain.</p>
<p>This validated solution uses an implementation of the VMware Cloud Foundation application virtual networks feature in the management domain provided by NSX. The application virtual networks in the management domain can be either overlay-backed NSX segments or VLAN-backed NSX segments.</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Overlay-backed NSX segment</td>
<td>The routing to the VMware Cloud Foundation VLAN-backed management network segment and other networks can use dynamic routing protocols or static routing. Routed access to the VLAN-backed management network segment is provided through an NSX Tier-1 and Tier-0 gateways. Recommended option to facilitate scale out to a multi instance design supporting disaster recovery.</td>
</tr>
<tr>
<td>VLAN-backed NSX segment</td>
<td>Two unique VLANs, network subnets, and vCenter Server portgroups are required.</td>
</tr>
</tbody>
</table>
<p><strong>Design Decisions on Network Segmentr</strong></p>
<table>
<thead>
<tr>
<th>Decision ID</th>
<th>Design Decision</th>
<th>Design Justification</th>
<th>Design Implication</th>
</tr>
</thead>
<tbody>
<tr>
<td>VCF-VCD-NET-001</td>
<td>Place the VMware Cloud Director cells on NSX overlay segments.</td>
<td>Provides a consistent deployment model for management applications and a potential to extend to a second VMware Cloud Foundation instance for disaster recovery.</td>
<td>VMware NSX is required to support this networking configuration.</td>
</tr>
<tr>
<td>VCF-VCD-NET-002</td>
<td>Create separate overlay segments for VMware Cloud Director management and dmz (public web access) traffic.</td>
<td>Enhance security by separating different traffic types on different networks.</td>
<td>More logical networking objects for management exist.</td>
</tr>
</tbody>
</table>
<h2 id=logical-routing>
Logical Routing
<a class=anchor href=#logical-routing>#</a>
</h2>
<p>Use separate Tier-1 Gateways to enable more granular security control for the different types of traffic in the VMware Cloud Director instances.</p>
<p><strong>Design Decisions on Logical Routing</strong></p>
<table>
<thead>
<tr>
<th>Decision ID</th>
<th>Design Decision</th>
<th>Design Justification</th>
<th>Design Implication</th>
</tr>
</thead>
<tbody>
<tr>
<td>VCF-VCD-NET-003</td>
<td>Create individual Tier-1 Gateway for the VMware Cloud Director management and dmz traffic.</td>
<td>Provide well-defined traffic separation and adaptable security controls.</td>
<td>More logical networking objects for management exist.</td>
</tr>
</tbody>
</table>
<h2 id=ip-addressing>
IP Addressing
<a class=anchor href=#ip-addressing>#</a>
</h2>
<p>Allocate statically assigned IP addresses and host names to the VMware Cloud Director cell and the load balancer from their corresponding management and dmz networks.</p>
<p><strong>Design Decisions on IP Addressing</strong></p>
<table>
<thead>
<tr>
<th>Decision ID</th>
<th>Design Decision</th>
<th>Design Justification</th>
<th>Design Implication</th>
</tr>
</thead>
<tbody>
<tr>
<td>VCF-VCD-NET-004</td>
<td><ul><li>Allocate statically assigned IP addresses to the VMware Cloud Director cells from their corresponding management and dmz networks.</li><li>Allocate statically assigned IP address for the dmz load balancer virtual service.</li><ul></td>
<td>Using statically assigned IP addresses ensures deployment stability and makes it simpler to maintain and easier to track.</td>
<td>Requires precise IP address management.</td>
</tr>
</tbody>
</table>
<h2 id=name-resolution>
Name Resolution
<a class=anchor href=#name-resolution>#</a>
</h2>
<p>Name resolution provides the translation between an IP address and a fully qualified domain name (FQDN), which makes it easier to remember and connect to components across the SDDC. The IP address of each VMware Cloud Director cell and the dmz load balancer VIP must have a valid internal DNS forward (A) and reverse (PTR) record.</p>
<p><strong>Design Decisions on Name Resolutuion</strong></p>
<table>
<thead>
<tr>
<th>Decision ID</th>
<th>Design Decision</th>
<th>Design Justification</th>
<th>Design Implication</th>
</tr>
</thead>
<tbody>
<tr>
<td>VCF-VCD-NET-005</td>
<td>Configure DNS servers for VMware Cloud Director infrastructure.</td>
<td>Ensures that VMware Cloud Director has accurate name resolution on which its services depend.</td>
<td><ul><li>DNS infrastructure services should be highly available in the environment.</li><li>Firewalls between the VMware Cloud Director cells and the DNS servers must allow DNS traffic.</li><li>Must provide two or more DNS servers unless a DNS geographic load balancing is activated.</li></ul></td>
</tr>
<tr>
<td>VCF-VCD-NET-006</td>
<td>Configure forward and reverse DNS records for each VMware Cloud Director cell IP management and dmz interfaces' IP addresses and for the dmz (web access) load balancer virtual service IP address.</td>
<td>VMware Cloud Director is accessible using a fully qualified domain name instead of IP addresses only.</td>
<td><ul><li>Must provide individual DNS records for each VMware Cloud Director cell and the NSX Advanced Load Balancer Virtual Service.</li><li>Firewalls between the VMware Cloud Director cells and the DNS servers must allow DNS traffic.</li></ul></td>
</tr>
</tbody>
</table>
<h2 id=load-balancing>
Load Balancing
<a class=anchor href=#load-balancing>#</a>
</h2>
<p>VMware Cloud Director' server group deployment requires a load balancer to manage the connections to the VMware Cloud Director services. This validated solution uses load-balancing services provided by NSX Advanced Load Balancer in the management domain. <a href=./vcd-lbaas-implementation>[Read more]</a></p>
<h2 id=time-synchronization>
Time Synchronization
<a class=anchor href=#time-synchronization>#</a>
</h2>
<p>The system time for the VMware Cloud Director cells, along with dependencies and integrations, must be synchronized and must use the same timezone.</p>
<p><strong>Design Decisions on Time Synchronization</strong></p>
<table>
<thead>
<tr>
<th>Decision ID</th>
<th>Design Decision</th>
<th>Design Justification</th>
<th>Design Implication</th>
</tr>
</thead>
<tbody>
<tr>
<td>VCF-VCD-NET-007</td>
<td>Configure NTP servers for each VMware Cloud DIrector cell.</td>
<td><ul><li>Ensures that VMware Cloud Director has accurate time synchronization on which its services depend.</li><li>Assists in preventing time mismatch between the VMware Cloud Director and dependencies.</li></ul></td>
<td><ul><li>NTP infrastructure services should be highly available in the environment.</li><li>Firewalls between the VMware Cloud Direcotr cells and the NTP servers must allow NTP traffic.</li><li>Must provide two or more NTP servers unless an NTP geographic load balancing is activated.</li></ul></td>
</tr>
</tbody>
</table>
<h2 id=vmware-cloud-director-security-requirements>
VMware Cloud Director Security Requirements
<a class=anchor href=#vmware-cloud-director-security-requirements>#</a>
</h2>
<p>VMware Cloud Director operations require a secure network environment. Connect all VMware Cloud Director servers to a secured and monitored network.
For information on the network ports and protocols used by VMware Cloud Director, see <a href=https://ports.vmware.com/home/VMware-Cloud-Director>[VMware Ports and Protocols.]</a></p>
</article>
<footer class=book-footer>
<div class="flex flex-wrap justify-between">
</div>
<script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>
</footer>
<div class=book-comments>
</div>
<label for=menu-control class="hidden book-menu-overlay"></label>
</div>
</main>
</body>
</html>