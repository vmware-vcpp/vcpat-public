<!doctype html><html lang=en-us dir=ltr>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Networking and Security Design for VMware Cloud Director on VMware Cloud Foundation #  Network Design for VMware Cloud Foundation #  VMware NSX provides networking services for infrastructure management components and workloads in VMware Cloud Foundation such as load balancing, routing and virtual networking. [Read more]
Network Design for VMware Cloud Director #  For secure access to the UI and API of VMware Cloud Director, the Primary and Secondary Cells are placed on cross-instance NSX segments.">
<meta name=theme-color content="#FFFFFF">
<meta name=color-scheme content="light dark"><meta property="og:title" content="Networking and Security Design for VMware Cloud Director on VMware Cloud Foundation">
<meta property="og:description" content="Networking and Security Design for VMware Cloud Director on VMware Cloud Foundation #  Network Design for VMware Cloud Foundation #  VMware NSX provides networking services for infrastructure management components and workloads in VMware Cloud Foundation such as load balancing, routing and virtual networking. [Read more]
Network Design for VMware Cloud Director #  For secure access to the UI and API of VMware Cloud Director, the Primary and Secondary Cells are placed on cross-instance NSX segments.">
<meta property="og:type" content="article">
<meta property="og:url" content="http://vcpat.cloudhappens.io/docs/networking-security/logical-design/"><meta property="article:section" content="docs">
<meta property="article:modified_time" content="2023-10-16T12:09:27+03:00">
<title>Networking and Security Design for VMware Cloud Director on VMware Cloud Foundation | VMware Cloud Provider Architecture Toolkit</title>
<link rel=manifest href=/manifest.json>
<link rel=icon href=/favicon.png type=image/x-icon>
<link rel=stylesheet href=/book.min.82c5dbd23447cee0b4c2aa3ed08ce0961faa40e1fa370eee4f8c9f02e0d46b5f.css integrity="sha256-gsXb0jRHzuC0wqo+0Izglh+qQOH6Nw7uT4yfAuDUa18=" crossorigin=anonymous>
<script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.58054b8ffbab66129e1e24f722725efd3ed94cbb66aebf46d9149b8e4e5147c8.js integrity="sha256-WAVLj/urZhKeHiT3InJe/T7ZTLtmrr9G2RSbjk5RR8g=" crossorigin=anonymous></script>
</head>
<body dir=ltr>
<input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control>
<main class="container flex">
<aside class=book-menu>
<div class=book-menu-content>
<nav>
<h2 class=book-brand>
<a class="flex align-center" href=/><span>VMware Cloud Provider Architecture Toolkit</span>
</a>
</h2>
<div class=book-search>
<input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/>
<div class="book-search-spinner hidden"></div>
<ul id=book-search-results></ul>
</div>
<ul>
<li><a href=/feedback/><em>Feedback</em></a></li>
</ul>
<h2 id=draft-validated-solutions>
Draft Validated Solutions:
<a class=anchor href=#draft-validated-solutions>#</a>
</h2>
<ul>
<li><a href=/docs/cloud-infrastructure/><strong>Cloud Infrastructure</strong></a>
<ul>
<li><a href=/docs/cloud-infrastructure/planning/>Planning and Preparation</a></li>
<li><a href=/docs/cloud-infrastructure/design/>Design Objectives</a></li>
<li><a href=/docs/cloud-infrastructure/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/cloud-infrastructure/implementation/>Implementation</a></li>
<li><a href=/docs/cloud-infrastructure/operations/>Operational Guidance</a></li>
<li><a href=/docs/cloud-infrastructure/design-decisions/>Design Decisions</a></li>
<li><a href=/docs/cloud-infrastructure/solution-interop/>Solution Interoperability</a></li>
<li><a href=/docs/cloud-infrastructure/appendix/>Appendix</a></li>
</ul>
</li>
<li><a href=/docs/dr-migration/><strong>DR and Migration</strong></a>
<ul>
<li><a href=/docs/dr-migration/planning/>Planning and Preparation</a></li>
<li><a href=/docs/dr-migration/design/>Design Objectives</a></li>
<li><a href=/docs/dr-migration/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/dr-migration/implementation/>Implementation</a></li>
<li><a href=/docs/dr-migration/operations/>Operational Guidance</a></li>
</ul>
</li>
<li><a href=/docs/developer-ready-cloud/><strong>Developer Ready Cloud</strong></a>
<ul>
<li><a href=/docs/developer-ready-cloud/planning/>Planning and Preparation</a></li>
<li><a href=/docs/developer-ready-cloud/design/>Design Objectives</a></li>
<li><a href=/docs/developer-ready-cloud/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/developer-ready-cloud/implementation/>Implementation</a></li>
<li><a href=/docs/developer-ready-cloud/operations/>Operational Guidance</a></li>
</ul>
</li>
<li><a href=/docs/sovereign-cloud/><strong>Sovereign Cloud</strong></a>
<ul>
<li><a href=/docs/sovereign-cloud/planning/>Planning and Preparation</a></li>
<li><a href=/docs/sovereign-cloud/design/>Design Objectives</a></li>
<li><a href=/docs/sovereign-cloud/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/sovereign-cloud/implementation/>Implementation</a></li>
<li><a href=/docs/sovereign-cloud/operations/>Operational Guidance</a></li>
</ul>
</li>
<li><a href=/docs/networking-security/><strong>Networking and Security</strong></a>
<ul>
<li><a href=/docs/networking-security/planning/>Planning and Preparation</a></li>
<li><a href=/docs/networking-security/design/>Design Objectives</a></li>
<li><a href=/docs/networking-security/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/networking-security/implementation/>Implementation</a></li>
<li><a href=/docs/networking-security/operations/>Operational Guidance</a></li>
</ul>
</li>
</ul>
<h2 id=toolkit-documents>
Toolkit Documents:
<a class=anchor href=#toolkit-documents>#</a>
</h2>
<ul>
<li><strong>VMware Cloud Provider Lifecycle Manager</strong></li>
<li><a href=/docs/cloud-director/><strong>VMware Cloud Director</strong></a>
<ul>
<li>Automation</li>
<li>Branding & Themes</li>
<li>Extensibility</li>
<li><a href=/docs/cloud-director/identity-access/>Identity & Access</a></li>
<li>Multi-site</li>
<li>Networking</li>
<li>Scale</li>
<li>Security</li>
</ul>
</li>
<li><strong>VMware Cloud Director service</strong>
<ul>
<li><a href=/docs/cloud-director-service/implementation/>Implementation</a></li>
</ul>
</li>
<li><strong>VMware Cloud Director Availability</strong></li>
<li><strong>VMware vCloud Usage Meter</strong></li>
<li><strong>VMware Cloud Director Container Service Extension</strong></li>
<li><strong>VMware Cloud Director Oject Storage Extension</strong></li>
<li><strong>VMware Cloud Director Application Launchpad</strong>
<br></li>
</ul>
<ul>
<li>
<a href=https://cloudsolutions.vmware.com target=_blank rel=noopener>
VMware Cloud Solutions
</a>
</li>
</ul>
</nav>
<script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>
</div>
</aside>
<div class=book-page>
<header class=book-header>
<div class="flex align-center justify-between">
<label for=menu-control>
<img src=/svg/menu.svg class=book-icon alt=Menu>
</label>
<strong>Networking and Security Design for VMware Cloud Director on VMware Cloud Foundation</strong>
<label for=toc-control>
</label>
</div>
</header>
<article class=markdown><h1 id=networking-and-security-design-for-vmware-cloud-director-on-vmware-cloud-foundation>
Networking and Security Design for VMware Cloud Director on VMware Cloud Foundation
<a class=anchor href=#networking-and-security-design-for-vmware-cloud-director-on-vmware-cloud-foundation>#</a>
</h1>
<h2 id=network-design-for-vmware-cloud-foundation>
Network Design for VMware Cloud Foundation
<a class=anchor href=#network-design-for-vmware-cloud-foundation>#</a>
</h2>
<p>VMware NSX provides networking services for infrastructure management components and workloads in VMware Cloud Foundation such as load balancing, routing and virtual networking. <a href=https://docs.vmware.com/en/VMware-Cloud-Foundation/5.0/vcf-design/GUID-A7EFAC2B-4C36-4D54-A199-F448E7C3890E.html>[Read more]</a></p>
<h2 id=network-design-for-vmware-cloud-director>
Network Design for VMware Cloud Director
<a class=anchor href=#network-design-for-vmware-cloud-director>#</a>
</h2>
<p>For secure access to the UI and API of VMware Cloud Director, the Primary and Secondary Cells are placed on cross-instance NSX segments.</p>
<p><strong>Network Design of VMware CLoud Director Deployment on Overlay-Backed NSX Segments</strong></p>
<p><img src=/images/networking-security/01-logical-design.png alt="Logical design"></p>
<h2 id=network-segments>
Network Segments
<a class=anchor href=#network-segments>#</a>
</h2>
<p>The network segment design consists of characteristics and decisions for placement of the VMware Cloud Director in the VMware Cloud Foundation Management domain.</p>
<p>This validated solution uses an implementation of the VMware Cloud Foundation application virtual networks feature in the management domain provided by NSX. The application virtual networks in the management domain can be either overlay-backed NSX segments or VLAN-backed NSX segments.</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Overlay-backed NSX segment</td>
<td>The routing to the VMware Cloud Foundation VLAN-backed management network segment and other networks can use dynamic routing protocols or static routing. Routed access to the VLAN-backed management network segment is provided through an NSX Tier-1 and Tier-0 gateways. Recommended option to facilitate scale out to a multi instance design supporting disaster recovery.</td>
</tr>
<tr>
<td>VLAN-backed NSX segment</td>
<td>Two unique VLANs, network subnets, and vCenter Server portgroups are required.</td>
</tr>
</tbody>
</table>
<p><strong>Design Decisions on the Network Segment for VMware Cloud Director</strong></p>
<table>
<thead>
<tr>
<th>Decision ID</th>
<th>Design Decision</th>
<th>Design Justification</th>
<th>Design Implication</th>
</tr>
</thead>
<tbody>
<tr>
<td>VCF-VCD-NET-001</td>
<td>Place the VMware Cloud Director cell nodes on NSX overlay segments.</td>
<td>Provides a consistent deployment model for management applications and a potential to extend to a second VMware Cloud Foundation instance for disaster recovery.</td>
<td>VMware NSX is required to support this networking configuration.</td>
</tr>
<tr>
<td>VCF-VCD-NET-002</td>
<td>Create separate overlay segments for VMware Cloud Director management and production traffic.</td>
<td>Enhance security by separating different traffic types on different networks.</td>
<td>More logical networking objects for management exist.</td>
</tr>
</tbody>
</table>
<h2 id=logical-routing>
Logical Routing
<a class=anchor href=#logical-routing>#</a>
</h2>
<p>Use separate Tier-1 Gateways to enable more granular security control for the different types of traffic in the VMware Cloud Director instances.</p>
<p><strong>Design Decisions on the Logical Routing for VMware Cloud Director</strong></p>
<table>
<thead>
<tr>
<th>Decision ID</th>
<th>Design Decision</th>
<th>Design Justification</th>
<th>Design Implication</th>
</tr>
</thead>
<tbody>
<tr>
<td>VCF-VCD-NET-003</td>
<td>Create individual Tier-1 Gateway for the VMware Cloud Director management and production traffic.</td>
<td>Provide well-defined traffic separation and adaptable security controls.</td>
<td>More logical networking objects for management exist.</td>
</tr>
</tbody>
</table>
<h2 id=ip-addressing>
IP Addressing
<a class=anchor href=#ip-addressing>#</a>
</h2>
<h2 id=name-resolution>
Name Resolution
<a class=anchor href=#name-resolution>#</a>
</h2>
<h2 id=load-balancing>
Load Balancing
<a class=anchor href=#load-balancing>#</a>
</h2>
<h2 id=time-synchronization>
Time Synchronization
<a class=anchor href=#time-synchronization>#</a>
</h2>
<h2 id=vmware-cloud-director-firewall-ports>
VMware Cloud Director Firewall Ports
<a class=anchor href=#vmware-cloud-director-firewall-ports>#</a>
</h2>
<p>The below table provides a list of ports used by VMware Cloud Provider Lifecycle Manager for product and integration communication.</p>
<table>
<thead>
<tr>
<th>Port</th>
<th>Protocol</th>
<th>Direction</th>
<th>Target</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>9443</td>
<td>TCP</td>
<td>Inbound / Outbound</td>
<td>Management network</td>
<td>Port used for VMware Cloud Provider Lifecycle Manager REST API.</td>
</tr>
<tr>
<td>22</td>
<td>TCP</td>
<td>Inbound / Outbound</td>
<td>Management network</td>
<td>SSH connection to the VMware Cloud Provider Lifecycle Manager machine to configure and set up deployment binaries.</td>
</tr>
<tr>
<td>22</td>
<td>TCP</td>
<td>Outbound</td>
<td>Deployed products (VCD, RMQ, vROPS TA, UM)</td>
<td>SSH used to configure deployed products.</td>
</tr>
<tr>
<td>53</td>
<td>TCP/UDP</td>
<td>Inbound / Outbound</td>
<td>DNS Server</td>
<td>DNS will be used to resolve IPs and hostnames and validate corresponding records for requested deployments.<br> <br> The DNS server provided in the payload will be used for validation purposes.</td>
</tr>
<tr>
<td>123</td>
<td>UDP</td>
<td>Outbound</td>
<td>NTP server</td>
<td>Configure NTP server to ensure time is in sync.</td>
</tr>
<tr>
<td>443</td>
<td>TCP</td>
<td>Outbound</td>
<td>vCenter (Mgmt and resource)<br> NSX Manager<br> VCD (cells and load balancer)<br> vROPS<br> vROPS Tenant App<br> Usage Meter</td>
<td>HTTPS traffic to access and configure deployed products as well as validate infrastructure components.</td>
</tr>
<tr>
<td>5671 *</td>
<td>TCP, UDP</td>
<td>Outbound</td>
<td>RabbitMQ</td>
<td>AMQP port used for RabbitMQ AMQP service. This port can be customized; thus, the corresponding port must be accessible.</td>
</tr>
<tr>
<td>15671 *</td>
<td>TCP</td>
<td>Outbound</td>
<td>RabbitMQ Management Interface</td>
<td>Management port used for RabbitMQ Management Interface. This port can be customized; thus, the corresponding port must be accessible.</td>
</tr>
<tr>
<td></td>
<td>ICMP</td>
<td>Inbound / Outbound</td>
<td>VCD cells<br> VCD cells<br> vROPS Tenant App<br> Usage Meter<br> RabbitMQ</td>
<td>Ping is performed to check if deployed machines are running or existing prior to deployment.</td>
</tr>
</tbody>
</table>
</article>
<footer class=book-footer>
<div class="flex flex-wrap justify-between">
</div>
<script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>
</footer>
<div class=book-comments>
</div>
<label for=menu-control class="hidden book-menu-overlay"></label>
</div>
</main>
</body>
</html>