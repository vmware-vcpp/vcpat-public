<!doctype html><html lang=en-us dir=ltr>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="DR and Migration Network Design #  Inside data centers, while the cloud providers typically use links with 10 Gbps or more between the components, the routing of replication data traffic might still benefit from optimizing. The way the Cloud Tunnel Appliance and the Cloud Replicator Appliance instances connect in the local cloud site is important. This connectivity can be routed or switched. Routed connectivity is easier for deployment and configuration.">
<meta name=theme-color content="#FFFFFF">
<meta name=color-scheme content="light dark"><meta property="og:title" content="DR and Migration Network Design">
<meta property="og:description" content="DR and Migration Network Design #  Inside data centers, while the cloud providers typically use links with 10 Gbps or more between the components, the routing of replication data traffic might still benefit from optimizing. The way the Cloud Tunnel Appliance and the Cloud Replicator Appliance instances connect in the local cloud site is important. This connectivity can be routed or switched. Routed connectivity is easier for deployment and configuration.">
<meta property="og:type" content="article">
<meta property="og:url" content="http://vcpat.cloudhappens.io/docs/dr-migration/network-design/"><meta property="article:section" content="docs">
<meta property="article:modified_time" content="2023-10-16T09:47:35+03:00">
<title>DR and Migration Network Design | VMware Cloud Provider Architecture Toolkit</title>
<link rel=manifest href=/manifest.json>
<link rel=icon href=/favicon.png type=image/x-icon>
<link rel=stylesheet href=/book.min.82c5dbd23447cee0b4c2aa3ed08ce0961faa40e1fa370eee4f8c9f02e0d46b5f.css integrity="sha256-gsXb0jRHzuC0wqo+0Izglh+qQOH6Nw7uT4yfAuDUa18=" crossorigin=anonymous>
<script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.28191c5a0790ed313ab950f46962b62e3ad336d2ec7852f4a836f25eaf8af061.js integrity="sha256-KBkcWgeQ7TE6uVD0aWK2LjrTNtLseFL0qDbyXq+K8GE=" crossorigin=anonymous></script>
</head>
<body dir=ltr>
<input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control>
<main class="container flex">
<aside class=book-menu>
<div class=book-menu-content>
<nav>
<h2 class=book-brand>
<a class="flex align-center" href=/><span>VMware Cloud Provider Architecture Toolkit</span>
</a>
</h2>
<div class=book-search>
<input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/>
<div class="book-search-spinner hidden"></div>
<ul id=book-search-results></ul>
</div>
<ul>
<li><a href=/feedback/><em>Feedback</em></a></li>
</ul>
<h2 id=draft-validated-solutions>
Draft Validated Solutions:
<a class=anchor href=#draft-validated-solutions>#</a>
</h2>
<ul>
<li><a href=/docs/cloud-infrastructure/><strong>Cloud Infrastructure</strong></a>
<ul>
<li><a href=/docs/cloud-infrastructure/planning/>Planning and Preparation</a></li>
<li><a href=/docs/cloud-infrastructure/design/>Design Objectives</a></li>
<li><a href=/docs/cloud-infrastructure/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/cloud-infrastructure/implementation/>Implementation</a></li>
<li><a href=/docs/cloud-infrastructure/operations/>Operational Guidance</a></li>
<li><a href=/docs/cloud-infrastructure/design-decisions/>Design Decisions</a></li>
<li><a href=/docs/cloud-infrastructure/solution-interop/>Solution Interoperability</a></li>
<li><a href=/docs/cloud-infrastructure/appendix/>Appendix</a></li>
</ul>
</li>
<li><a href=/docs/dr-migration/><strong>DR and Migration</strong></a>
<ul>
<li><a href=/docs/dr-migration/planning/>Planning and Preparation</a></li>
<li><a href=/docs/dr-migration/design/>Design Objectives</a></li>
<li><a href=/docs/dr-migration/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/dr-migration/implementation/>Implementation</a></li>
<li><a href=/docs/dr-migration/operations/>Operational Guidance</a></li>
</ul>
</li>
<li><a href=/docs/developer-ready-cloud/><strong>Developer Ready Cloud</strong></a>
<ul>
<li><a href=/docs/developer-ready-cloud/planning/>Planning and Preparation</a></li>
<li><a href=/docs/developer-ready-cloud/design/>Design Objectives</a></li>
<li><a href=/docs/developer-ready-cloud/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/developer-ready-cloud/implementation/>Implementation</a></li>
<li><a href=/docs/developer-ready-cloud/operations/>Operational Guidance</a></li>
</ul>
</li>
<li><a href=/docs/sovereign-cloud/><strong>Sovereign Cloud</strong></a>
<ul>
<li><a href=/docs/sovereign-cloud/planning/>Planning and Preparation</a></li>
<li><a href=/docs/sovereign-cloud/design/>Design Objectives</a></li>
<li><a href=/docs/sovereign-cloud/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/sovereign-cloud/implementation/>Implementation</a></li>
<li><a href=/docs/sovereign-cloud/operations/>Operational Guidance</a></li>
</ul>
</li>
<li><a href=/docs/networking-security/><strong>Networking and Security</strong></a>
<ul>
<li><a href=/docs/networking-security/planning/>Planning and Preparation</a></li>
<li><a href=/docs/networking-security/design/>Design Objectives</a></li>
<li><a href=/docs/networking-security/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/networking-security/implementation/>Implementation</a></li>
<li><a href=/docs/networking-security/operations/>Operational Guidance</a></li>
</ul>
</li>
</ul>
<h2 id=toolkit-documents>
Toolkit Documents:
<a class=anchor href=#toolkit-documents>#</a>
</h2>
<ul>
<li><strong>VMware Cloud Provider Lifecycle Manager</strong></li>
<li><a href=/docs/cloud-director/><strong>VMware Cloud Director</strong></a>
<ul>
<li>Automation</li>
<li>Branding & Themes</li>
<li>Extensibility</li>
<li><a href=/docs/cloud-director/identity-access/>Identity & Access</a></li>
<li>Multi-site</li>
<li>Networking</li>
<li>Scale</li>
<li>Security</li>
</ul>
</li>
<li><strong>VMware Cloud Director service</strong>
<ul>
<li><a href=/docs/cloud-director-service/implementation/>Implementation</a></li>
</ul>
</li>
<li><strong>VMware Cloud Director Availability</strong></li>
<li><strong>VMware vCloud Usage Meter</strong></li>
<li><strong>VMware Cloud Director Container Service Extension</strong></li>
<li><strong>VMware Cloud Director Oject Storage Extension</strong></li>
<li><strong>VMware Cloud Director Application Launchpad</strong>
<br></li>
</ul>
<ul>
<li>
<a href=https://cloudsolutions.vmware.com target=_blank rel=noopener>
VMware Cloud Solutions
</a>
</li>
</ul>
</nav>
<script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>
</div>
</aside>
<div class=book-page>
<header class=book-header>
<div class="flex align-center justify-between">
<label for=menu-control>
<img src=/svg/menu.svg class=book-icon alt=Menu>
</label>
<strong>DR and Migration Network Design</strong>
<label for=toc-control>
</label>
</div>
</header>
<article class=markdown><h1 id=dr-and-migration-network-design>
DR and Migration Network Design
<a class=anchor href=#dr-and-migration-network-design>#</a>
</h1>
<p>Inside data centers, while the cloud providers typically use links with 10 Gbps or more between the components, the routing of replication data traffic might still benefit from optimizing. The way the Cloud Tunnel Appliance and the Cloud Replicator Appliance instances connect in the local cloud site is important. This connectivity can be routed or switched. Routed connectivity is easier for deployment
and configuration. However, the routers might bottleneck replications. The intensive replication traffic might impact the operations of the routers, causing issues for other types of traffic.</p>
<p>To bypass the routers and optimize the replication data traffic, use multiple network interfaces for the cloud appliances and connect the Cloud Replicator Appliance instances with the Cloud Tunnel Appliance at a common Layer 2 port group. By using such optimization, only the connectivity with the Cloud Replication Management Appliance and with the management infrastructure remains over routed networks. However, the management traffic is negligible compared to the replication data traffic.</p>
<p>The following network diagram shows this topology.</p>
<p><img src=/images/dr-migration/detailed-design/network-design/vcda-vcf-network.png alt="Recommended network design for VMware Cloud Director Availability"></p>
<h2 id=network-ports>
Network Ports
<a class=anchor href=#network-ports>#</a>
</h2>
<p>This is the list of ports used by VMware Cloud Director Availability.</p>
<table>
<thead>
<tr>
<th>Source</th>
<th>Destination</th>
<th>Port Number</th>
<th>Protocol</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>VMware Cloud Director Availability Replicator</td>
<td>ESXi Hosts</td>
<td>902</td>
<td>TCP and UDP</td>
<td>Used by the VMware Cloud Director Availability Replicator service for replication traffic to the destination ESXi hosts.</td>
</tr>
<tr>
<td>VMware Cloud Director Availability Replicator</td>
<td>VMware Platform Services ControllerÂ®</td>
<td>443</td>
<td>TCP</td>
<td>Used for single sign-on and Lookup Service communication.</td>
</tr>
<tr>
<td>VMware Cloud Director Availability Replicator</td>
<td>vCenter Server</td>
<td>443</td>
<td>TCP</td>
<td>Used by the local VMware Cloud Director Availability vApp Replication Manager service or the VMware Cloud Director Availability Replicator service for communication with the local vCenter Server.</td>
</tr>
<tr>
<td>VMware Cloud Director Availability Replicator</td>
<td>VMware Cloud Director Availability vApp Replication Manager</td>
<td>8044</td>
<td>TCP</td>
<td>Used for vCloud Availability vApp Replication Manager management from the vCloud Availability Replicator.</td>
</tr>
<tr>
<td>VMware Cloud Director Availability Replicator</td>
<td>VMware Cloud Director Availability Tunnel</td>
<td>8048</td>
<td>TCP</td>
<td>Used for VMware Cloud Director Availability vApp Replication Manager management from the VMware Cloud Director Availability Replicator.</td>
</tr>
<tr>
<td>VMware Cloud Director Availability vApp Replication Manager</td>
<td>VMware Platform Services ControllerÂ®</td>
<td>443</td>
<td>TCP</td>
<td>Used for single sign-on and Lookup Service communication.</td>
</tr>
<tr>
<td>VMware Cloud Director Availability vApp Replication Manager</td>
<td>VMware Cloud Director service</td>
<td>443</td>
<td>TCP</td>
<td>Used for VMware Cloud Director Director management from the VMware Cloud Director Availability vApp Replication Manager.Â </td>
</tr>
<tr>
<td>VMware Cloud Director Availability vApp Replication Manager</td>
<td>VMware Cloud Director Availability Replicator</td>
<td>8043</td>
<td>TCP</td>
<td>Used for VMware Cloud Director Availability Replicator management from the VMware Cloud Director Availability vApp Replication Manager.Â </td>
</tr>
<tr>
<td>VMware Cloud Director Availability vApp Replication Manager</td>
<td>VMware Cloud Director Availability Tunnel</td>
<td>8047, 8048</td>
<td>TCP</td>
<td>Used for VMware Cloud Director Availability Tunnel management from the VMware Cloud Director Availability vApp Replication Manager.Â </td>
</tr>
<tr>
<td>VMware Cloud Director Availability Tunnel</td>
<td>VMware Cloud Director Availability Replicator</td>
<td>8043, 44045</td>
<td>TCP</td>
<td>Used for VMware Cloud Director Availability Replicator management from the VMware Cloud Director Availability Tunnel.Â </td>
</tr>
<tr>
<td>VMware Cloud Director Availability Tunnel</td>
<td>VMware Cloud Director Availability vApp Replication Manager</td>
<td>8044, 8046</td>
<td>TCP</td>
<td>Used for VMware Cloud Director Availability vApp Replication Manager service management from the VMware Cloud Director Availability Tunnel appliance.Â </td>
</tr>
<tr>
<td>VMware Cloud Director Availability Tunnel</td>
<td>VMware Platform Services ControllerÂ®</td>
<td>443</td>
<td>TCP</td>
<td>Used for VMware Platform Services ControllerÂ® communication management from the VMware Cloud Director Availability vApp Replication Manager and VMware Cloud Director Availability Replicator.Â </td>
</tr>
<tr>
<td>ESXi Hosts</td>
<td>VMware Cloud Director Availability Replicator</td>
<td>31031, 44045, 44046</td>
<td>TCP</td>
<td>Used by the ESXi hosts for replication traffic to the destination VMware Cloud Director Availability Replicator service.Â </td>
</tr>
<tr>
<td>Firewall</td>
<td>VMware Cloud Director Availability Tunnel</td>
<td>8048</td>
<td>TCP</td>
<td>Used for redirecting external traffic management to the VMware Cloud Director Availability Tunnel service.Â </td>
</tr>
</tbody>
</table>
</article>
<footer class=book-footer>
<div class="flex flex-wrap justify-between">
</div>
<script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>
</footer>
<div class=book-comments>
</div>
<label for=menu-control class="hidden book-menu-overlay"></label>
</div>
</main>
</body>
</html>