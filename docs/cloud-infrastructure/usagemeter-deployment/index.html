<!doctype html><html lang=en-us dir=ltr>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Implementation of Usage Meter using VMware Cloud Provider Lifecycle Manager #  Implementation of Usage Meter includes deployment of VMware Cloud Director on VMware Cloud Foundation using GUI of VMware Cloud Provider Lifecycle Manager
For information on the VMware Cloud Provider Lifecycle Manager design, refer to the Detailed design of Usage Meter section.
Prerequisites #  Verify that your environment is configured according to Before You Apply This Guidance and the Planning and Preparation of Usage Meter section.">
<meta name=theme-color content="#FFFFFF">
<meta name=color-scheme content="light dark"><meta property="og:title" content>
<meta property="og:description" content="Implementation of Usage Meter using VMware Cloud Provider Lifecycle Manager #  Implementation of Usage Meter includes deployment of VMware Cloud Director on VMware Cloud Foundation using GUI of VMware Cloud Provider Lifecycle Manager
For information on the VMware Cloud Provider Lifecycle Manager design, refer to the Detailed design of Usage Meter section.
Prerequisites #  Verify that your environment is configured according to Before You Apply This Guidance and the Planning and Preparation of Usage Meter section.">
<meta property="og:type" content="article">
<meta property="og:url" content="http://vcpat.cloudhappens.io/docs/cloud-infrastructure/usagemeter-deployment/"><meta property="article:section" content="docs">
<meta property="article:modified_time" content="2022-11-28T15:12:26+02:00">
<title>Usagemeter Deployment | VMware Cloud Provider Architecture Toolkit</title>
<link rel=manifest href=/manifest.json>
<link rel=icon href=/favicon.png type=image/x-icon>
<link rel=stylesheet href=/book.min.82c5dbd23447cee0b4c2aa3ed08ce0961faa40e1fa370eee4f8c9f02e0d46b5f.css integrity="sha256-gsXb0jRHzuC0wqo+0Izglh+qQOH6Nw7uT4yfAuDUa18=" crossorigin=anonymous>
<script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.653d3b967ed2b369e1fd8d8a2620cfdfe333b647f397789ad355b86fdf2be7c7.js integrity="sha256-ZT07ln7Ss2nh/Y2KJiDP3+Mztkfzl3ia01W4b98r58c=" crossorigin=anonymous></script>
</head>
<body dir=ltr>
<input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control>
<main class="container flex">
<aside class=book-menu>
<div class=book-menu-content>
<nav>
<h2 class=book-brand>
<a class="flex align-center" href=/><span>VMware Cloud Provider Architecture Toolkit</span>
</a>
</h2>
<div class=book-search>
<input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/>
<div class="book-search-spinner hidden"></div>
<ul id=book-search-results></ul>
</div>
<ul>
<li><a href=/feedback/><em>Feedback</em></a></li>
</ul>
<h2 id=draft-validated-solutions>
Draft Validated Solutions:
<a class=anchor href=#draft-validated-solutions>#</a>
</h2>
<ul>
<li><a href=/docs/cloud-infrastructure/><strong>Cloud Infrastructure</strong></a>
<ul>
<li><a href=/docs/cloud-infrastructure/planning/>Planning and Preparation</a></li>
<li><a href=/docs/cloud-infrastructure/design/>Design Objectives</a></li>
<li><a href=/docs/cloud-infrastructure/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/cloud-infrastructure/implementation/>Implementation</a></li>
<li><a href=/docs/cloud-infrastructure/operations/>Operational Guidance</a></li>
<li><a href=/docs/cloud-infrastructure/design-decisions/>Design Decisions</a></li>
<li><a href=/docs/cloud-infrastructure/solution-interop/>Solution Interoperability</a></li>
</ul>
</li>
<li><a href=/docs/dr-migration/><strong>DR and Migration</strong></a>
<ul>
<li><a href=/docs/dr-migration/planning/>Planning and Preparation</a></li>
<li><a href=/docs/dr-migration/design/>Design Objectives</a></li>
<li><a href=/docs/dr-migration/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/dr-migration/implementation/>Implementation</a></li>
<li><a href=/docs/dr-migration/operations/>Operational Guidance</a></li>
</ul>
</li>
<li><a href=/docs/developer-ready-cloud/><strong>Developer Ready Cloud</strong></a>
<ul>
<li><a href=/docs/developer-ready-cloud/planning/>Planning and Preparation</a></li>
<li><a href=/docs/developer-ready-cloud/design/>Design Objectives</a></li>
<li><a href=/docs/developer-ready-cloud/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/developer-ready-cloud/implementation/>Implementation</a></li>
<li><a href=/docs/developer-ready-cloud/operations/>Operational Guidance</a></li>
</ul>
</li>
<li><a href=/docs/sovereign-cloud/><strong>Sovereign Cloud</strong></a>
<ul>
<li><a href=/docs/sovereign-cloud/planning/>Planning and Preparation</a></li>
<li><a href=/docs/sovereign-cloud/design/>Design Objectives</a></li>
<li><a href=/docs/sovereign-cloud/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/sovereign-cloud/implementation/>Implementation</a></li>
<li><a href=/docs/sovereign-cloud/operations/>Operational Guidance</a></li>
</ul>
</li>
</ul>
<h2 id=toolkit-documents>
Toolkit Documents:
<a class=anchor href=#toolkit-documents>#</a>
</h2>
<ul>
<li><strong>VMware Cloud Provider Lifecycle Manager</strong></li>
<li><a href=/docs/cloud-director/><strong>VMware Cloud Director</strong></a>
<ul>
<li>Automation</li>
<li>Branding & Themes</li>
<li>Extensibility</li>
<li><a href=/docs/cloud-director/identity-access/>Identity & Access</a></li>
<li>Multi-site</li>
<li>Networking</li>
<li>Scale</li>
<li>Security</li>
</ul>
</li>
<li><strong>VMware Cloud Director service</strong>
<ul>
<li><a href=/docs/cloud-director-service/implementation/>Implementation</a></li>
</ul>
</li>
<li><strong>VMware Cloud Director Availability</strong></li>
<li><strong>VMware vCloud Usage Meter</strong></li>
<li><strong>VMware Cloud Director Container Service Extension</strong></li>
<li><strong>VMware Cloud Director Oject Storage Extension</strong></li>
<li><strong>VMware Cloud Director Application Launchpad</strong>
<br></li>
</ul>
<ul>
<li>
<a href=https://cloudsolutions.vmware.com target=_blank rel=noopener>
VMware Cloud Solutions
</a>
</li>
</ul>
</nav>
<script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>
</div>
</aside>
<div class=book-page>
<header class=book-header>
<div class="flex align-center justify-between">
<label for=menu-control>
<img src=/svg/menu.svg class=book-icon alt=Menu>
</label>
<strong>Usagemeter Deployment</strong>
<label for=toc-control>
<img src=/svg/toc.svg class=book-icon alt="Table of Contents">
</label>
</div>
<aside class="hidden clearfix">
<nav id=TableOfContents>
<ul>
<li><a href=#implementation-of-usage-meter-using-vmware-cloud-provider-lifecycle-manager>Implementation of Usage Meter using VMware Cloud Provider Lifecycle Manager</a>
<ul>
<li><a href=#prerequisites>Prerequisites</a></li>
<li><a href=#procedure>Procedure</a></li>
<li><a href=#configuration>Configuration</a>
<ul>
<li><a href=#direct-connection-to-vcloud-usage-insight>Direct Connection to vCloud Usage Insight</a></li>
<li><a href=#using-a-proxy-server-for-the-vcloud-usage-meter-connection-to-vcloud-usage-insight>Using a Proxy Server for the vCloud Usage Meter Connection to vCloud Usage Insight</a></li>
<li><a href=#setting-up-usage-meter-in-offline-mode>Setting up Usage Meter in Offline Mode</a></li>
<li><a href=#registering-usage-meter-in-the-vmware-commerce-portal>Registering Usage Meter in the VMware Commerce Portal</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</aside>
</header>
<article class=markdown><h1 id=implementation-of-usage-meter-using-vmware-cloud-provider-lifecycle-manager>
Implementation of Usage Meter using VMware Cloud Provider Lifecycle Manager
<a class=anchor href=#implementation-of-usage-meter-using-vmware-cloud-provider-lifecycle-manager>#</a>
</h1>
<p>Implementation of Usage Meter includes deployment of VMware Cloud Director on VMware Cloud Foundation using GUI of VMware Cloud Provider Lifecycle Manager</p>
<p>For information on the VMware Cloud Provider Lifecycle Manager design, refer to the <strong>Detailed design of Usage Meter</strong> section.</p>
<h2 id=prerequisites>
Prerequisites
<a class=anchor href=#prerequisites>#</a>
</h2>
<p>Verify that your environment is configured according to  <strong>Before You Apply This Guidance</strong> and the  <strong>Planning and Preparation of Usage Meter</strong> section.</p>
<h2 id=procedure>
Procedure
<a class=anchor href=#procedure>#</a>
</h2>
<p><a href=../usagemeter-deployment-using-api>Deployment of Usage Meter using VMware Cloud Provider Lifecycle Manager</a></p>
<p>Usage Meter can also be deployed through the GUI of VMware Cloud provider Lifecycle Manager <a href=../usagemeter-deployment-subpage>Read More</a></p>
<h2 id=configuration>
Configuration
<a class=anchor href=#configuration>#</a>
</h2>
<p>After Usage Meter is deployed with VMware Cloud Provider Lifecycle Manager, you need to configure it. To do so, turn on your Usage Meter virtual appliance. Then, log in to the Usage Meter web application with the <em>usagementer</em> account. The Usage Meter web application URL consitutes the IP address that you have set for the appliance <em>https://usage-meter-ip-address</em>. On your first login to the web application , you will see the Usage Meter Initalization wizard. There, you need to configure the following:</p>
<ol>
<li>Read and agree with the Usage Meter terms and conditions.</li>
<li>Choose how Usage Meter will send the usage data:</li>
</ol>
<ul>
<li>Through direct connection to vCloud Usage Insight part of Cloud Partner Navigator</li>
<li>Through indirect connection to vCloud Usage Insight by using a proxy server</li>
<li>Not connecting to vCloud Usage Insight, which means that the Usage Meter appliance will store locally the collected usage data in raw format and won&rsquo;t send it outside the data center. This mode of operation is called &ldquo;offline&rdquo;.</li>
</ul>
<ol start=3>
<li>Use the vCloud Usage Meter unique ID identifier (UUID) to register it in the VMware Commerce Portal with a VCPP contract.</li>
</ol>
<h3 id=direct-connection-to-vcloud-usage-insight>
Direct Connection to vCloud Usage Insight
<a class=anchor href=#direct-connection-to-vcloud-usage-insight>#</a>
</h3>
<p>Here are the steps to configure Usage Meter to connect directly to vCloud Usage Insight:</p>
<ol>
<li>Log in to the vCloud Usage Meter web application as <em>usagemeter</em>.</li>
<li>In the Usage Meter Initialization Wizard, read and agree with the Usage Meter license agreement.</li>
<li>On the <strong>Network Connectivity</strong> page, select <strong>Direct</strong>.</li>
<li>On the <strong>Summary</strong> page, register the vCloud Usage Meter appliance for an automatic reporting of product consumption data. See the below section <strong>Registering Usage Meter in the VMware Commerce Portal</strong> for reference. If the registration is successful, you receive a success message.</li>
<li>Click <strong>Finish</strong>.</li>
</ol>
<h3 id=using-a-proxy-server-for-the-vcloud-usage-meter-connection-to-vcloud-usage-insight>
Using a Proxy Server for the vCloud Usage Meter Connection to vCloud Usage Insight
<a class=anchor href=#using-a-proxy-server-for-the-vcloud-usage-meter-connection-to-vcloud-usage-insight>#</a>
</h3>
<p>Here are the steps to set up the connection between vCloud Usage Meter and vCloud Usage Insight with a proxy server:</p>
<ol>
<li>Log in to vCloud Usage Meter web application as <em>usagemeter</em>.</li>
<li>Under <strong>Profile</strong>, click <strong>VAMI</strong>.</li>
<li>Log in to vCloud Usage Meter Appliance Management as <em>root</em>.</li>
<li>In the left navigation pane, click <strong>Networking</strong>.</li>
<li>Next to <strong>Proxy Settings</strong>, click <strong>Edit</strong>.</li>
<li>Enter the proxy server information, and click <strong>Save</strong>.</li>
</ol>
<h3 id=setting-up-usage-meter-in-offline-mode>
Setting up Usage Meter in Offline Mode
<a class=anchor href=#setting-up-usage-meter-in-offline-mode>#</a>
</h3>
<p>The offline Usage Meter mode is suitable for air-gapped environments that have no connection to the Internet.</p>
<p>In case providers don&rsquo;t want to send usage data to vCloud Usage Insight automatically , they need to download the data from their Usage Meter in offline mode and upload it to Cloud Partner Navigator.</p>
<p>To set up your Usage Meter in offline mode, you need to do the following:</p>
<ol>
<li>Log in to the Usage Meter web application as <em>usagemeter</em>.</li>
<li>On the <strong>Welcome</strong> page of the Usage Meter Intialization wizard, read and accept the Usage Meter terms and conditions.</li>
<li>Click <strong>Next</strong>.</li>
<li>On the <strong>Network Connectivity</strong> page, select <strong>Manual Upload</strong>.</li>
<li>Copy the vCloud Usage Meter UUID and register it in the VMware Commerce Portal. Read the below section <strong>Registering Usage Meter in the VMware Commerce Portal</strong>.</li>
<li>In the <strong>Token</strong> field, enter the Usage Meter offline token. You can obtain the token from your aggregator or VMware sales representative after registering the vCloud Usage Meter instance in the VMware Commerce Portal.</li>
<li>Click <strong>Next</strong>.</li>
<li>On the <strong>Summary</strong> page, click <strong>Finish</strong>.</li>
</ol>
<h3 id=registering-usage-meter-in-the-vmware-commerce-portal>
Registering Usage Meter in the VMware Commerce Portal
<a class=anchor href=#registering-usage-meter-in-the-vmware-commerce-portal>#</a>
</h3>
<p>The last step of the Usage Meter configuration is to register it with the VMware Commerce Portal. In this step, you need to associate your Usage Meter with a VCPP contract that you have with VMware and create a record for it. This way, all the data associated with the Usage Meters that you have, will be aggregated and presented in an MBO at the end of the month in your account.</p>
<p>To register Usage Meter in the VMware Commerce Portal, do the following:</p>
<ol>
<li>Log in to VMware Commerce Portal.</li>
<li>Click <strong>Profile</strong> in the drop-down menu under your username.</li>
<li>In your profile, do the following:</li>
</ol>
<ul>
<li>Check if you have the following role assigned: Auto Reports Operations. This role helps you manage Usage Meters, manage tickets, update the site, read contracts and update a partner profile.</li>
<li>Next to <strong>Auto Reporting for Rental</strong>, click <strong>Opt In</strong> if you haven’t done it yet. This option enables automatic reporting of the collected usage data.</li>
<li>Next to <strong>Flex Pricing Model for Rental</strong>, click <strong>Opt In</strong> if you haven’t done it yet. This option helps you switch to the VMware Flex Pricing Model. 5</li>
</ul>
<ol start=4>
<li>Under Contracts, in the VMware Commerce Portal, select a contract with which you will associate your Usage Meter.</li>
<li>In the selected contract, click the <strong>Usage Meter Instances</strong> tab.</li>
<li>Click <strong>Register New</strong> to register your vCloud Usage Meter.</li>
<li>In the Usage Meter registration form, do the following:</li>
</ol>
<ul>
<li>Enter a name for this appliance.</li>
<li>Paste the vCloud Usage Meter UUID.</li>
<li>Select the site for which the appliance will report data.</li>
<li>Select the version of the appliance to be 4.X.</li>
<li>Select the mode in which the appliance will operate.</li>
</ul>
<p><strong>Note:</strong> The <em>Test</em> mode is used for evaluation, while the <em>Production</em> mode is used for actual metering and reporting. Once you select the <em>Production</em> mode, you cannot change it to <em>Test</em> for this appliance later. A workaround is to delete the registered Usage Meter in VMware Commerce Portal and then register it again in <em>Test</em> mode.</p>
<ol start=8>
<li>Click <strong>OK</strong> to register the appliance.</li>
</ol>
</article>
<footer class=book-footer>
<div class="flex flex-wrap justify-between">
</div>
<script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>
</footer>
<div class=book-comments>
</div>
<label for=menu-control class="hidden book-menu-overlay"></label>
</div>
<aside class=book-toc>
<div class=book-toc-content>
<nav id=TableOfContents>
<ul>
<li><a href=#implementation-of-usage-meter-using-vmware-cloud-provider-lifecycle-manager>Implementation of Usage Meter using VMware Cloud Provider Lifecycle Manager</a>
<ul>
<li><a href=#prerequisites>Prerequisites</a></li>
<li><a href=#procedure>Procedure</a></li>
<li><a href=#configuration>Configuration</a>
<ul>
<li><a href=#direct-connection-to-vcloud-usage-insight>Direct Connection to vCloud Usage Insight</a></li>
<li><a href=#using-a-proxy-server-for-the-vcloud-usage-meter-connection-to-vcloud-usage-insight>Using a Proxy Server for the vCloud Usage Meter Connection to vCloud Usage Insight</a></li>
<li><a href=#setting-up-usage-meter-in-offline-mode>Setting up Usage Meter in Offline Mode</a></li>
<li><a href=#registering-usage-meter-in-the-vmware-commerce-portal>Registering Usage Meter in the VMware Commerce Portal</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</div>
</aside>
</main>
</body>
</html>