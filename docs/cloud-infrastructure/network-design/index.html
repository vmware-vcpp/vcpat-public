<!doctype html><html lang=en-us dir=ltr>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Cloud Infrastructure Network Design #  Network Design of Management Cluster for VMware Cloud Foundation #  The following picture shows the network design for all the components in the Cloud Infrastructure and how they are managed using VMware Cloud Provider Lifecyclle Manager
Reg.Mgmt and X.Reg.Mgmt
  These are overlay Segments
  Existing Reg. Mgmt is used for a secondary interface for VCD cells, vSAN FS, Usage meter, vRealize Operations">
<meta name=theme-color content="#FFFFFF">
<meta name=color-scheme content="light dark"><meta property="og:title" content="Cloud Infrastructure Network Design">
<meta property="og:description" content="Cloud Infrastructure Network Design #  Network Design of Management Cluster for VMware Cloud Foundation #  The following picture shows the network design for all the components in the Cloud Infrastructure and how they are managed using VMware Cloud Provider Lifecyclle Manager
Reg.Mgmt and X.Reg.Mgmt
  These are overlay Segments
  Existing Reg. Mgmt is used for a secondary interface for VCD cells, vSAN FS, Usage meter, vRealize Operations">
<meta property="og:type" content="article">
<meta property="og:url" content="http://vcpat.cloudhappens.io/docs/cloud-infrastructure/network-design/"><meta property="article:section" content="docs">
<meta property="article:modified_time" content="2022-11-29T12:58:06+05:30">
<title>Cloud Infrastructure Network Design | VMware Cloud Provider Architecture Toolkit</title>
<link rel=manifest href=/manifest.json>
<link rel=icon href=/favicon.png type=image/x-icon>
<link rel=stylesheet href=/book.min.82c5dbd23447cee0b4c2aa3ed08ce0961faa40e1fa370eee4f8c9f02e0d46b5f.css integrity="sha256-gsXb0jRHzuC0wqo+0Izglh+qQOH6Nw7uT4yfAuDUa18=" crossorigin=anonymous>
<script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.376e0af109b8c8e7e3dc72978545c4d092b8c759cd5c6f171bd31ac2d405fced.js integrity="sha256-N24K8Qm4yOfj3HKXhUXE0JK4x1nNXG8XG9MawtQF/O0=" crossorigin=anonymous></script>
</head>
<body dir=ltr>
<input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control>
<main class="container flex">
<aside class=book-menu>
<div class=book-menu-content>
<nav>
<h2 class=book-brand>
<a class="flex align-center" href=/><span>VMware Cloud Provider Architecture Toolkit</span>
</a>
</h2>
<div class=book-search>
<input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/>
<div class="book-search-spinner hidden"></div>
<ul id=book-search-results></ul>
</div>
<ul>
<li><a href=/feedback/><em>Feedback</em></a></li>
</ul>
<h2 id=draft-validated-solutions>
Draft Validated Solutions:
<a class=anchor href=#draft-validated-solutions>#</a>
</h2>
<ul>
<li><a href=/docs/cloud-infrastructure/><strong>Cloud Infrastructure</strong></a>
<ul>
<li><a href=/docs/cloud-infrastructure/planning/>Planning and Preparation</a></li>
<li><a href=/docs/cloud-infrastructure/design/>Design Objectives</a></li>
<li><a href=/docs/cloud-infrastructure/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/cloud-infrastructure/implementation/>Implementation</a></li>
<li><a href=/docs/cloud-infrastructure/operations/>Operational Guidance</a></li>
<li><a href=/docs/cloud-infrastructure/design-decisions/>Design Decisions</a></li>
<li><a href=/docs/cloud-infrastructure/solution-interop/>Solution Interoperability</a></li>
</ul>
</li>
<li><a href=/docs/dr-migration/><strong>DR and Migration</strong></a>
<ul>
<li><a href=/docs/dr-migration/planning/>Planning and Preparation</a></li>
<li><a href=/docs/dr-migration/design/>Design Objectives</a></li>
<li><a href=/docs/dr-migration/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/dr-migration/implementation/>Implementation</a></li>
<li><a href=/docs/dr-migration/operations/>Operational Guidance</a></li>
</ul>
</li>
<li><a href=/docs/developer-ready-cloud/><strong>Developer Ready Cloud</strong></a>
<ul>
<li><a href=/docs/developer-ready-cloud/planning/>Planning and Preparation</a></li>
<li><a href=/docs/developer-ready-cloud/design/>Design Objectives</a></li>
<li><a href=/docs/developer-ready-cloud/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/developer-ready-cloud/implementation/>Implementation</a></li>
<li><a href=/docs/developer-ready-cloud/operations/>Operational Guidance</a></li>
</ul>
</li>
<li><a href=/docs/sovereign-cloud/><strong>Sovereign Cloud</strong></a>
<ul>
<li><a href=/docs/sovereign-cloud/planning/>Planning and Preparation</a></li>
<li><a href=/docs/sovereign-cloud/design/>Design Objectives</a></li>
<li><a href=/docs/sovereign-cloud/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/sovereign-cloud/implementation/>Implementation</a></li>
<li><a href=/docs/sovereign-cloud/operations/>Operational Guidance</a></li>
</ul>
</li>
</ul>
<h2 id=toolkit-documents>
Toolkit Documents:
<a class=anchor href=#toolkit-documents>#</a>
</h2>
<ul>
<li><strong>VMware Cloud Provider Lifecycle Manager</strong></li>
<li><a href=/docs/cloud-director/><strong>VMware Cloud Director</strong></a>
<ul>
<li>Automation</li>
<li>Branding & Themes</li>
<li>Extensibility</li>
<li><a href=/docs/cloud-director/identity-access/>Identity & Access</a></li>
<li>Multi-site</li>
<li>Networking</li>
<li>Scale</li>
<li>Security</li>
</ul>
</li>
<li><strong>VMware Cloud Director service</strong>
<ul>
<li><a href=/docs/cloud-director-service/implementation/>Implementation</a></li>
</ul>
</li>
<li><strong>VMware Cloud Director Availability</strong></li>
<li><strong>VMware vCloud Usage Meter</strong></li>
<li><strong>VMware Cloud Director Container Service Extension</strong></li>
<li><strong>VMware Cloud Director Oject Storage Extension</strong></li>
<li><strong>VMware Cloud Director Application Launchpad</strong>
<br></li>
</ul>
<ul>
<li>
<a href=https://cloudsolutions.vmware.com target=_blank rel=noopener>
VMware Cloud Solutions
</a>
</li>
</ul>
</nav>
<script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>
</div>
</aside>
<div class=book-page>
<header class=book-header>
<div class="flex align-center justify-between">
<label for=menu-control>
<img src=/svg/menu.svg class=book-icon alt=Menu>
</label>
<strong>Cloud Infrastructure Network Design</strong>
<label for=toc-control>
</label>
</div>
</header>
<article class=markdown><h1 id=cloud-infrastructure-network-design>
Cloud Infrastructure Network Design
<a class=anchor href=#cloud-infrastructure-network-design>#</a>
</h1>
<h2 id=network-design-of-management-cluster-for-vmware-cloud-foundation>
Network Design of Management Cluster for VMware Cloud Foundation
<a class=anchor href=#network-design-of-management-cluster-for-vmware-cloud-foundation>#</a>
</h2>
<p>The following picture shows the network design for all the components in the Cloud Infrastructure and how they are managed using VMware Cloud Provider Lifecyclle Manager</p>
<p><img src=/images/vcplcm-detailed-design/image4.jpg alt="Logical design"></p>
<p><strong>Reg.Mgmt and X.Reg.Mgmt</strong></p>
<ul>
<li>
<p>These are overlay Segments</p>
</li>
<li>
<p>Existing Reg. Mgmt is used for a secondary interface for VCD cells, vSAN FS, Usage meter, vRealize Operations</p>
<p>Manager Tenant App and VMware Cloud provider Lifecycle Manager</p>
</li>
<li>
<p>Cross region X.Reg.Mgmt is utilized for RabbitMQ nodes and load balancer.</p>
</li>
</ul>
<p><strong>VCD DMZ</strong></p>
<ul>
<li>
<p>VCD DMZ network has been added to separate the internet traffic. It is routed via a separate Tier-1 gateway and connected to existing Tier-0.</p>
</li>
<li>
<p>VCD Cells have the primary (eth0) interface connected to this network with NSX-T load balancer in its own Tier-1 gateway.</p>
</li>
</ul>
<br>
<h2 id=vmware-cloud-provider-lifecycle-manager-firewall-ports>
VMware Cloud Provider Lifecycle Manager Firewall Ports
<a class=anchor href=#vmware-cloud-provider-lifecycle-manager-firewall-ports>#</a>
</h2>
<p>The below table provides a list of ports used by VMware Cloud Provider Lifecycle Manager for product and integration communication.</p>
<table>
<thead>
<tr>
<th>Port</th>
<th>Protocol</th>
<th>Direction</th>
<th>Target</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>9443</td>
<td>TCP</td>
<td>Inbound / Outbound</td>
<td>Management network</td>
<td>Port used for VMware Cloud Provider Lifecycle Manager REST API.</td>
</tr>
<tr>
<td>22</td>
<td>TCP</td>
<td>Inbound / Outbound</td>
<td>Management network</td>
<td>SSH connection to the VMware Cloud Provider Lifecycle Manager machine to configure and set up deployment binaries.</td>
</tr>
<tr>
<td>22</td>
<td>TCP</td>
<td>Outbound</td>
<td>Deployed products (VCD, RMQ, vROPS TA, UM)</td>
<td>SSH used to configure deployed products.</td>
</tr>
<tr>
<td>53</td>
<td>TCP/UDP</td>
<td>Inbound / Outbound</td>
<td>DNS Server</td>
<td>DNS will be used to resolve IPs and hostnames and validate corresponding records for requested deployments.<br> <br> The DNS server provided in the payload will be used for validation purposes.</td>
</tr>
<tr>
<td>123</td>
<td>UDP</td>
<td>Outbound</td>
<td>NTP server</td>
<td>Configure NTP server to ensure time is in sync.</td>
</tr>
<tr>
<td>443</td>
<td>TCP</td>
<td>Outbound</td>
<td>vCenter (Mgmt and resource)<br> NSX Manager<br> VCD (cells and load balancer)<br> vROPS<br> vROPS Tenant App<br> Usage Meter</td>
<td>HTTPS traffic to access and configure deployed products as well as validate infrastructure components.</td>
</tr>
<tr>
<td>5671 *</td>
<td>TCP, UDP</td>
<td>Outbound</td>
<td>RabbitMQ</td>
<td>AMQP port used for RabbitMQ AMQP service. This port can be customized; thus, the corresponding port must be accessible.</td>
</tr>
<tr>
<td>15671 *</td>
<td>TCP</td>
<td>Outbound</td>
<td>RabbitMQ Management Interface</td>
<td>Management port used for RabbitMQ Management Interface. This port can be customized; thus, the corresponding port must be accessible.</td>
</tr>
<tr>
<td></td>
<td>ICMP</td>
<td>Inbound / Outbound</td>
<td>VCD cells<br> VCD cells<br> vROPS Tenant App<br> Usage Meter<br> RabbitMQ</td>
<td>Ping is performed to check if deployed machines are running or existing prior to deployment.</td>
</tr>
</tbody>
</table>
</article>
<footer class=book-footer>
<div class="flex flex-wrap justify-between">
</div>
<script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>
</footer>
<div class=book-comments>
</div>
<label for=menu-control class="hidden book-menu-overlay"></label>
</div>
</main>
</body>
</html>