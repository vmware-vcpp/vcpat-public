<!doctype html><html lang=en-us dir=ltr>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Cloud Infrastructure Network Design #  The network design for the Cloud Infrastructure validated solution covers logical networking and security design decisions for VMware Cloud Director and the supporting infrastructure, private cloud services, and external solutions, such as Usage Meter, VMware Chargeback, RabbitMQ, and VMware Cloud Provider Lifecycle Manager deployed on top of а VMware Cloud Foundation.
VMware NSX provides networking services for infrastructure management components and workloads in VMware Cloud Foundation such as load balancing, routing and virtual networking.">
<meta name=theme-color content="#FFFFFF">
<meta name=color-scheme content="light dark"><meta property="og:title" content="Cloud Infrastructure Network Design">
<meta property="og:description" content="Cloud Infrastructure Network Design #  The network design for the Cloud Infrastructure validated solution covers logical networking and security design decisions for VMware Cloud Director and the supporting infrastructure, private cloud services, and external solutions, such as Usage Meter, VMware Chargeback, RabbitMQ, and VMware Cloud Provider Lifecycle Manager deployed on top of а VMware Cloud Foundation.
VMware NSX provides networking services for infrastructure management components and workloads in VMware Cloud Foundation such as load balancing, routing and virtual networking.">
<meta property="og:type" content="article">
<meta property="og:url" content="http://vcpat.cloudhappens.io/docs/cloud-infrastructure/network-design/"><meta property="article:section" content="docs">
<meta property="article:modified_time" content="2023-10-23T12:05:24+03:00">
<title>Cloud Infrastructure Network Design | VMware Cloud Provider Architecture Toolkit</title>
<link rel=manifest href=/manifest.json>
<link rel=icon href=/favicon.png type=image/x-icon>
<link rel=stylesheet href=/book.min.82c5dbd23447cee0b4c2aa3ed08ce0961faa40e1fa370eee4f8c9f02e0d46b5f.css integrity="sha256-gsXb0jRHzuC0wqo+0Izglh+qQOH6Nw7uT4yfAuDUa18=" crossorigin=anonymous>
<script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.09120b6c37355b9f8feb415bc45364c46fd3f2060ea42bc864d79d88a14d0ba6.js integrity="sha256-CRILbDc1W5+P60FbxFNkxG/T8gYOpCvIZNediKFNC6Y=" crossorigin=anonymous></script>
</head>
<body dir=ltr>
<input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control>
<main class="container flex">
<aside class=book-menu>
<div class=book-menu-content>
<nav>
<h2 class=book-brand>
<a class="flex align-center" href=/><span>VMware Cloud Provider Architecture Toolkit</span>
</a>
</h2>
<div class=book-search>
<input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/>
<div class="book-search-spinner hidden"></div>
<ul id=book-search-results></ul>
</div>
<ul>
<li><a href=/feedback/><em>Feedback</em></a></li>
</ul>
<h2 id=draft-validated-solutions>
Draft Validated Solutions:
<a class=anchor href=#draft-validated-solutions>#</a>
</h2>
<ul>
<li><a href=/docs/cloud-infrastructure/><strong>Cloud Infrastructure</strong></a>
<ul>
<li><a href=/docs/cloud-infrastructure/planning/>Planning and Preparation</a></li>
<li><a href=/docs/cloud-infrastructure/design/>Design Objectives</a></li>
<li><a href=/docs/cloud-infrastructure/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/cloud-infrastructure/implementation/>Implementation</a></li>
<li><a href=/docs/cloud-infrastructure/operations/>Operational Guidance</a></li>
<li><a href=/docs/cloud-infrastructure/design-decisions/>Design Decisions</a></li>
<li><a href=/docs/cloud-infrastructure/solution-interop/>Solution Interoperability</a></li>
<li><a href=/docs/cloud-infrastructure/appendix/>Appendix</a></li>
</ul>
</li>
<li><a href=/docs/dr-migration/><strong>DR and Migration</strong></a>
<ul>
<li><a href=/docs/dr-migration/planning/>Planning and Preparation</a></li>
<li><a href=/docs/dr-migration/design/>Design Objectives</a></li>
<li><a href=/docs/dr-migration/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/dr-migration/implementation/>Implementation</a></li>
<li><a href=/docs/dr-migration/operations/>Operational Guidance</a></li>
</ul>
</li>
<li><a href=/docs/developer-ready-cloud/><strong>Developer Ready Cloud</strong></a>
<ul>
<li><a href=/docs/developer-ready-cloud/planning/>Planning and Preparation</a></li>
<li><a href=/docs/developer-ready-cloud/design/>Design Objectives</a></li>
<li><a href=/docs/developer-ready-cloud/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/developer-ready-cloud/implementation/>Implementation</a></li>
<li><a href=/docs/developer-ready-cloud/operations/>Operational Guidance</a></li>
</ul>
</li>
<li><a href=/docs/sovereign-cloud/><strong>Sovereign Cloud</strong></a>
<ul>
<li><a href=/docs/sovereign-cloud/planning/>Planning and Preparation</a></li>
<li><a href=/docs/sovereign-cloud/design/>Design Objectives</a></li>
<li><a href=/docs/sovereign-cloud/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/sovereign-cloud/implementation/>Implementation</a></li>
<li><a href=/docs/sovereign-cloud/operations/>Operational Guidance</a></li>
</ul>
</li>
</ul>
<h2 id=toolkit-documents>
Toolkit Documents:
<a class=anchor href=#toolkit-documents>#</a>
</h2>
<ul>
<li><strong>VMware Cloud Provider Lifecycle Manager</strong></li>
<li><a href=/docs/cloud-director/><strong>VMware Cloud Director</strong></a>
<ul>
<li>Automation</li>
<li>Branding & Themes</li>
<li>Extensibility</li>
<li><a href=/docs/cloud-director/identity-access/>Identity & Access</a></li>
<li>Multi-site</li>
<li>Networking</li>
<li>Scale</li>
<li>Security</li>
</ul>
</li>
<li><strong>VMware Cloud Director service</strong>
<ul>
<li><a href=/docs/cloud-director-service/implementation/>Implementation</a></li>
</ul>
</li>
<li><strong>VMware Cloud Director Availability</strong></li>
<li><strong>VMware vCloud Usage Meter</strong></li>
<li><strong>VMware Cloud Director Container Service Extension</strong></li>
<li><strong>VMware Cloud Director Oject Storage Extension</strong></li>
<li><strong>VMware Cloud Director Application Launchpad</strong>
<br></li>
</ul>
<ul>
<li>
<a href=https://cloudsolutions.vmware.com target=_blank rel=noopener>
VMware Cloud Solutions
</a>
</li>
</ul>
</nav>
<script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>
</div>
</aside>
<div class=book-page>
<header class=book-header>
<div class="flex align-center justify-between">
<label for=menu-control>
<img src=/svg/menu.svg class=book-icon alt=Menu>
</label>
<strong>Cloud Infrastructure Network Design</strong>
<label for=toc-control>
</label>
</div>
</header>
<article class=markdown><h1 id=cloud-infrastructure-network-design>
Cloud Infrastructure Network Design
<a class=anchor href=#cloud-infrastructure-network-design>#</a>
</h1>
<p>The network design for the Cloud Infrastructure validated solution covers logical networking and security design decisions for VMware Cloud Director and the supporting infrastructure, private cloud services, and external solutions, such as Usage Meter, VMware Chargeback, RabbitMQ, and VMware Cloud Provider Lifecycle Manager deployed on top of а VMware Cloud Foundation.</p>
<p>VMware NSX provides networking services for infrastructure management components and workloads in VMware Cloud Foundation such as load balancing, routing and virtual networking. <a href=https://docs.vmware.com/en/VMware-Cloud-Foundation/5.0/vcf-design/GUID-A7EFAC2B-4C36-4D54-A199-F448E7C3890E.html>[Read more]</a></p>
<h2 id=network-segments>
Network Segments
<a class=anchor href=#network-segments>#</a>
</h2>
<p>In VMware Cloud Foundation, the Cloud Infrastructure components are placed on pre-defined NSX segments (known as application virtual networks or AVNs) for dynamic routing and load balancing. NSX segments provide flexibility for workload placement by removing the dependence on traditional physical data center networks. This approach also improves the management applications' security and mobility, reducing the integration effort with the existing customer network.</p>
<p>This validated solution uses an implementation of the VMware Cloud Foundation application virtual networks feature in the management domain provided by NSX. The application virtual networks in the management domain can be either overlay-backed NSX segments or VLAN-backed NSX segments.</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Overlay-backed NSX segment</td>
<td>The routing to the VMware Cloud Foundation VLAN-backed management network segment and other networks can use dynamic routing protocols or static routing. Routed access to the VLAN-backed management network segment is provided through an NSX Tier-1 and Tier-0 gateways. Recommended option to facilitate scale out to a multi instance design supporting disaster recovery.</td>
</tr>
<tr>
<td>VLAN-backed NSX segment</td>
<td>Two unique VLANs, network subnets, and vCenter Server portgroups are required.</td>
</tr>
</tbody>
</table>
<p><strong>Network Design of Cloud Infrastructure deployment</strong></p>
<p><img src=/images/networking-security/01-ci-network-logical-design.png alt="Logical design"></p>
<p><strong>Design Decisions on Network Segment</strong></p>
<table>
<thead>
<tr>
<th>Decision ID</th>
<th>Design Decision</th>
<th>Design Justification</th>
<th>Design Implication</th>
</tr>
</thead>
<tbody>
<tr>
<td>VCF-VCD-NET-001</td>
<td>Place the Cloud Infrastructure components on NSX overlay segments.</td>
<td>Provides a consistent deployment model for management applications and a potential to extend to a second VMware Cloud Foundation instance for disaster recovery.</td>
<td>VMware NSX is required to support this networking configuration.</td>
</tr>
<tr>
<td>VCF-VCD-NET-002</td>
<td>Create separate overlay segments for the Management and DMZ (public web access) traffic.</td>
<td>Enhance security by separating different traffic types on different networks.</td>
<td>More logical networking objects for management exist.</td>
</tr>
</tbody>
</table>
<h2 id=logical-routing>
Logical Routing
<a class=anchor href=#logical-routing>#</a>
</h2>
<p>Use separate Tier-1 Gateways to enable more granular security control for the different Cloud Infrastructure components traffic types.</p>
<p><strong>Design Decisions on Logical Routing</strong></p>
<table>
<thead>
<tr>
<th>Decision ID</th>
<th>Design Decision</th>
<th>Design Justification</th>
<th>Design Implication</th>
</tr>
</thead>
<tbody>
<tr>
<td>VCF-VCD-NET-003</td>
<td>Create individual Tier-1 Gateway for the Management and DMZ traffic.</td>
<td>Provide well-defined traffic separation and adaptable security controls.</td>
<td>More logical networking objects for management exist.</td>
</tr>
</tbody>
</table>
<h2 id=ip-addressing>
IP Addressing
<a class=anchor href=#ip-addressing>#</a>
</h2>
<p>Allocate statically assigned IP addresses and host names to the Cloud Infrastructure components and the load balancer services from their corresponding Management and DMZ networks.</p>
<p><strong>Design Decisions on IP Addressing</strong></p>
<table>
<thead>
<tr>
<th>Decision ID</th>
<th>Design Decision</th>
<th>Design Justification</th>
<th>Design Implication</th>
</tr>
</thead>
<tbody>
<tr>
<td>VCF-VCD-NET-004</td>
<td><ul><li>Allocate statically assigned IP addresses to the Cloud Infrastructure components from their corresponding Management and DMZ networks.</li><li>Allocate statically assigned IP addresses for the DMZ load balancer virtual service.</li><ul></td>
<td>Using statically assigned IP addresses ensures deployment stability and makes it simpler to maintain and easier to track.</td>
<td>Requires precise IP address management.</td>
</tr>
</tbody>
</table>
<h2 id=name-resolution>
Name Resolution
<a class=anchor href=#name-resolution>#</a>
</h2>
<p>Name resolution provides the translation between an IP address and a fully qualified domain name (FQDN), which makes it easier to remember and connect to components across the SDDC. The IP address of each Cloud Infrastructure component and the DMZ load balancer VIP must have a valid internal DNS forward (A) and reverse (PTR) record.</p>
<p><strong>Design Decisions on Name Resolution</strong></p>
<table>
<thead>
<tr>
<th>Decision ID</th>
<th>Design Decision</th>
<th>Design Justification</th>
<th>Design Implication</th>
</tr>
</thead>
<tbody>
<tr>
<td>VCF-VCD-NET-005</td>
<td>Configure DNS servers for Cloud Infrastructure components.</td>
<td>Ensures that all Cloud Infrastructure components have accurate name resolution on which its services depend.</td>
<td><ul><li>DNS infrastructure services should be highly available in the environment.</li><li>Firewalls between the Cloud Infrastructure components and the DNS servers must allow DNS traffic.</li><li>Must provide two or more DNS servers unless a DNS geographic load balancing is activated.</li></ul></td>
</tr>
<tr>
<td>VCF-VCD-NET-006</td>
<td>Configure forward and reverse DNS records for each Cloud Infrastructure component IP Management and DMZ interfaces' IP addresses and for the DMZ (web access) load balancer virtual service IP address.</td>
<td>Cloud Infrastructure components are accessible using a fully qualified domain name instead of IP addresses only.</td>
<td><ul><li>Must provide individual DNS records for each Cloud Infrastructure component and the NSX Advanced Load Balancer Virtual Services.</li><li>Firewalls between the Cloud Infrastructure components and the DNS servers must allow DNS traffic.</li></ul></td>
</tr>
</tbody>
</table>
<h2 id=load-balancing>
Load Balancing
<a class=anchor href=#load-balancing>#</a>
</h2>
<p>VMware Cloud Director server group deployment requires a load balancer to manage the connections to the VMware Cloud Director services. This validated solution uses load-balancing services provided by NSX Advanced Load Balancer in the management domain. <a href=./vcd-lbaas-implementation>[Read more]</a></p>
<h2 id=time-synchronization>
Time Synchronization
<a class=anchor href=#time-synchronization>#</a>
</h2>
<p>The system time for the Cloud Infrastructure components, along with dependencies and integrations, must be synchronized and must use the same timezone.</p>
<p><strong>Design Decisions on Time Synchronization</strong></p>
<table>
<thead>
<tr>
<th>Decision ID</th>
<th>Design Decision</th>
<th>Design Justification</th>
<th>Design Implication</th>
</tr>
</thead>
<tbody>
<tr>
<td>VCF-VCD-NET-007</td>
<td>Configure NTP servers for each Cloud Infrastructure component.</td>
<td><ul><li>Ensures that Cloud Infrastructure components has accurate time synchronization on which its services depend.</li><li>Assists in preventing time mismatch between the Cloud Infrastructure components and dependencies.</li></ul></td>
<td><ul><li>NTP infrastructure services should be highly available in the environment.</li><li>Firewalls between the Cloud Infrastructure components and the NTP servers must allow NTP traffic.</li><li>Must provide two or more NTP servers unless an NTP geographic load balancing is activated.</li></ul></td>
</tr>
</tbody>
</table>
<h2 id=cloud-infrastructure-security-requirements>
Cloud Infrastructure Security Requirements
<a class=anchor href=#cloud-infrastructure-security-requirements>#</a>
</h2>
<p>Cloud Infrastructure operations require a secure network environment. Connect all Cloud Infrastructure components to a secured and monitored network.</p>
<p>Use the reference table below to discover up-to-date information on the network ports and protocols used by the Cloud Infrastructure components.</p>
<p><strong>VMware Cloud Infrastructure Ports and Protocols</strong></p>
<table>
<thead>
<tr>
<th>Cloud Infrastructure component</th>
<th>VMware Ports and Protocols</th>
</tr>
</thead>
<tbody>
<tr>
<td>VMware Cloud Director</td>
<td><a href=https://ports.vmware.com/home/VMware-Cloud-Director>[ VMware Cloud Director Ports and Protocols.]</a></td>
</tr>
<tr>
<td>VMware Cloud Provider Lifecycle Manager</td>
<td><a href=https://ports.esp.vmware.com/home/VMware-Cloud-Provider-Lifecycle-Manager>[ VMware Cloud Provider Lifecycle Manager Ports and Protocols.]</a></td>
</tr>
<tr>
<td>vCloud Usage Meter</td>
<td><a href=https://ports.esp.vmware.com/home/vCloud-Usage-Meter>[ VvCloud Usage Meter Ports and Protocols.]</a></td>
</tr>
</tbody>
</table>
</article>
<footer class=book-footer>
<div class="flex flex-wrap justify-between">
</div>
<script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>
</footer>
<div class=book-comments>
</div>
<label for=menu-control class="hidden book-menu-overlay"></label>
</div>
</main>
</body>
</html>