<!doctype html><html lang=en-us dir=ltr>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Tanzu Kubernetes Metering and Reporting #  Configuration #  Tanzu is automatically detected if the Usage Meter administrator configures the endpoint and credentials for each vCenter to be metered using the Usage Meter web application. The Usage Meter administrator can choose to either meter Tanzu as a vRAM or CPU cores metric by selecting the respective option from the &ldquo;If Tanzu is detected, choose the metric to report:&rdquo; drop-down list.">
<meta name=theme-color content="#FFFFFF">
<meta name=color-scheme content="light dark"><meta property="og:title" content="Tanzu Kubernetes Metering and Reporting">
<meta property="og:description" content="Tanzu Kubernetes Metering and Reporting #  Configuration #  Tanzu is automatically detected if the Usage Meter administrator configures the endpoint and credentials for each vCenter to be metered using the Usage Meter web application. The Usage Meter administrator can choose to either meter Tanzu as a vRAM or CPU cores metric by selecting the respective option from the &ldquo;If Tanzu is detected, choose the metric to report:&rdquo; drop-down list.">
<meta property="og:type" content="article">
<meta property="og:url" content="http://vcpat.cloudhappens.io/docs/cloud-infrastructure/tkgs-metering/"><meta property="article:section" content="docs">
<meta property="article:modified_time" content="2023-09-18T16:27:17-04:00">
<title>Tanzu Kubernetes Metering and Reporting | VMware Cloud Provider Architecture Toolkit</title>
<link rel=manifest href=/manifest.json>
<link rel=icon href=/favicon.png type=image/x-icon>
<link rel=stylesheet href=/book.min.82c5dbd23447cee0b4c2aa3ed08ce0961faa40e1fa370eee4f8c9f02e0d46b5f.css integrity="sha256-gsXb0jRHzuC0wqo+0Izglh+qQOH6Nw7uT4yfAuDUa18=" crossorigin=anonymous>
<script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.691306ea9132befb7c2dc4b4c06ac8a94fa716b926d05c2defdc8912444d69e9.js integrity="sha256-aRMG6pEyvvt8LcS0wGrIqU+nFrkm0Fwt79yJEkRNaek=" crossorigin=anonymous></script>
</head>
<body dir=ltr>
<input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control>
<main class="container flex">
<aside class=book-menu>
<div class=book-menu-content>
<nav>
<h2 class=book-brand>
<a class="flex align-center" href=/><span>VMware Cloud Provider Architecture Toolkit</span>
</a>
</h2>
<div class=book-search>
<input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/>
<div class="book-search-spinner hidden"></div>
<ul id=book-search-results></ul>
</div>
<ul>
<li><a href=/feedback/><em>Feedback</em></a></li>
</ul>
<h2 id=draft-validated-solutions>
Draft Validated Solutions:
<a class=anchor href=#draft-validated-solutions>#</a>
</h2>
<ul>
<li><a href=/docs/cloud-infrastructure/><strong>Cloud Infrastructure</strong></a>
<ul>
<li><a href=/docs/cloud-infrastructure/planning/>Planning and Preparation</a></li>
<li><a href=/docs/cloud-infrastructure/design/>Design Objectives</a></li>
<li><a href=/docs/cloud-infrastructure/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/cloud-infrastructure/implementation/>Implementation</a></li>
<li><a href=/docs/cloud-infrastructure/operations/>Operational Guidance</a></li>
<li><a href=/docs/cloud-infrastructure/design-decisions/>Design Decisions</a></li>
<li><a href=/docs/cloud-infrastructure/solution-interop/>Solution Interoperability</a></li>
<li><a href=/docs/cloud-infrastructure/appendix/>Appendix</a></li>
</ul>
</li>
<li><a href=/docs/dr-migration/><strong>DR and Migration</strong></a>
<ul>
<li><a href=/docs/dr-migration/planning/>Planning and Preparation</a></li>
<li><a href=/docs/dr-migration/design/>Design Objectives</a></li>
<li><a href=/docs/dr-migration/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/dr-migration/implementation/>Implementation</a></li>
<li><a href=/docs/dr-migration/operations/>Operational Guidance</a></li>
</ul>
</li>
<li><a href=/docs/developer-ready-cloud/><strong>Developer Ready Cloud</strong></a>
<ul>
<li><a href=/docs/developer-ready-cloud/planning/>Planning and Preparation</a></li>
<li><a href=/docs/developer-ready-cloud/design/>Design Objectives</a></li>
<li><a href=/docs/developer-ready-cloud/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/developer-ready-cloud/implementation/>Implementation</a></li>
<li><a href=/docs/developer-ready-cloud/operations/>Operational Guidance</a></li>
</ul>
</li>
<li><a href=/docs/sovereign-cloud/><strong>Sovereign Cloud</strong></a>
<ul>
<li><a href=/docs/sovereign-cloud/planning/>Planning and Preparation</a></li>
<li><a href=/docs/sovereign-cloud/design/>Design Objectives</a></li>
<li><a href=/docs/sovereign-cloud/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/sovereign-cloud/implementation/>Implementation</a></li>
<li><a href=/docs/sovereign-cloud/operations/>Operational Guidance</a></li>
</ul>
</li>
</ul>
<h2 id=toolkit-documents>
Toolkit Documents:
<a class=anchor href=#toolkit-documents>#</a>
</h2>
<ul>
<li><strong>VMware Cloud Provider Lifecycle Manager</strong></li>
<li><a href=/docs/cloud-director/><strong>VMware Cloud Director</strong></a>
<ul>
<li>Automation</li>
<li>Branding & Themes</li>
<li>Extensibility</li>
<li><a href=/docs/cloud-director/identity-access/>Identity & Access</a></li>
<li>Multi-site</li>
<li>Networking</li>
<li>Scale</li>
<li>Security</li>
</ul>
</li>
<li><strong>VMware Cloud Director service</strong>
<ul>
<li><a href=/docs/cloud-director-service/implementation/>Implementation</a></li>
</ul>
</li>
<li><strong>VMware Cloud Director Availability</strong></li>
<li><strong>VMware vCloud Usage Meter</strong></li>
<li><strong>VMware Cloud Director Container Service Extension</strong></li>
<li><strong>VMware Cloud Director Oject Storage Extension</strong></li>
<li><strong>VMware Cloud Director Application Launchpad</strong>
<br></li>
</ul>
<ul>
<li>
<a href=https://cloudsolutions.vmware.com target=_blank rel=noopener>
VMware Cloud Solutions
</a>
</li>
</ul>
</nav>
<script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>
</div>
</aside>
<div class=book-page>
<header class=book-header>
<div class="flex align-center justify-between">
<label for=menu-control>
<img src=/svg/menu.svg class=book-icon alt=Menu>
</label>
<strong>Tanzu Kubernetes Metering and Reporting</strong>
<label for=toc-control>
</label>
</div>
</header>
<article class=markdown><h1 id=tanzu-kubernetes-metering-and-reporting>
Tanzu Kubernetes Metering and Reporting
<a class=anchor href=#tanzu-kubernetes-metering-and-reporting>#</a>
</h1>
<h2 id=configuration>
Configuration
<a class=anchor href=#configuration>#</a>
</h2>
<p>Tanzu is automatically detected if the Usage Meter administrator configures the endpoint and credentials for each vCenter to be metered using the Usage Meter web application. The Usage Meter administrator can choose to either meter Tanzu as a vRAM or CPU cores metric by selecting the respective option from the &ldquo;If Tanzu is detected, choose the metric to report:&rdquo; drop-down list. The Usage Meter administrator can switch between the vRAM metric and CPU cores metric any time during the metering period. The default metering metric is vRAM.
Any of the following Tanzu editions can be selected in the Usage Meter web application as well.</p>
<ul>
<li>Tanzu Basic</li>
<li>Tanzu Standard</li>
<li>Tanzu Advanced</li>
</ul>
<p><strong>Note:</strong> Currently, Usage Insight will only report Tanzu-related usage as Basic in the monthly usage reports, irrespective of the selected Tanzu edition. In future vCloud Usage Insight releases, there will be a fine-grain mapping of the Tanzu-related usage and its correlating edition.</p>
<p><strong>Note:</strong> It is recommended that a single Usage Meter instance meters a single Tanzu edition. For datacenters using different Tanzu editions, there should be a separate Usage Meter installation for each used Tanzu edition.
Metering</p>
<p>Only Tanzu Basic-related VMs are metered based on Tanzu Basic usage. The following type of VMs will be considered as Tanzu Basic-related VMs:</p>
<ul>
<li><strong>Supervisor VM:</strong> These VMs are Kubernetes control plane VMs. Three Kubernetes control plane VMs in total are created on the hosts that are part of the Supervisor Cluster. The three-control plane VMs are load-balanced as each one of them has its own IP address. Additionally, a floating IP address is assigned to one of the VMs. vSphere DRS determines the exact placement of the control plane VMs on the ESXi hosts and migrates them when needed. vSphere DRS is also integrated with the Kubernetes Scheduler on the control plane VMs so that DRS determines the placement of vSphere Pods. When as a DevOps engineer, you schedule a vSphere Pod, the request goes through the regular Kubernetes workflow, then to DRS, which makes the final placement decision.</li>
<li><strong>POD VM:</strong> A vSphere Pod is a VM with a small footprint that runs one or more Linux containers. Each vSphere Pod is sized precisely for the workload that it accommodates and has explicit resource reservations for that workload. It allocates the exact amount of storage, memory, and CPU resources required for the workload to run. vSphere Pods are only supported with Supervisor Clusters configured with NSX-T Data Center as the networking stack.</li>
<li><strong>TKG VM:</strong> VMs running and managing Tanzu Kubernetes clusters. A Tanzu Kubernetes cluster is a full distribution of the open-source Kubernetes container orchestration platform that is built, signed, and supported by VMware. You can provision and operate Tanzu Kubernetes clusters on the Supervisor Cluster by using the Tanzu Kubernetes Grid Service. Both main nodes and worker nodes are metered in the Tanzu Kubernetes cluster.</li>
</ul>
<p>Tanzu Basic supports both time-based average vRAM metering metric and CPU cores metering metric.</p>
<ul>
<li><strong>vRAM metric (Time-based average vRAM usage):</strong> Average vRAM usage for all Tanzu Basic-related powered-on VMs.</li>
<li><strong>CPU cores metric (Time-based average of host CPU core count):</strong> Average host cores usage for all hosts with at least one powered-on Tanzu Basic-related VM. A host is metered for the period where there was at least one powered-on Tanzu Basic-related VM running on this host during the metering period. All cores of the host are metered for the duration.</li>
</ul>
<p>For example, if there is at least one powered-on VM that is running on a host with 6 CPU cores for any of the 10 days in a 30-day period, this host will be billed with an average host CPU core count of 2, (6 * (1/3) = 2). If a host -whether it has been modified or added or placed into migration mode (i.e., host state changes) - has been running even a single VM, the host is metered for the duration where there is at least one powered-on Tanzu Basic-related VM.</p>
<h2 id=reporting>
Reporting
<a class=anchor href=#reporting>#</a>
</h2>
<p>Tanzu Basic Usage (if detected) is always reported as a standalone line item in the Monthly Usage Report.</p>
<h3 id=sample-monthly-usage-report>
Sample Monthly Usage Report
<a class=anchor href=#sample-monthly-usage-report>#</a>
</h3>
<table>
<thead>
<tr>
<th><strong>Product</strong></th>
<th><strong>Hostname</strong></th>
<th><strong>Version</strong></th>
<th><strong>VC UUID</strong></th>
<th><strong>Units of Measure</strong></th>
<th><strong>Units to be Reported</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Tanzu Basic</td>
<td></td>
<td></td>
<td></td>
<td>Avg Capped Billed vRAM (GB)</td>
<td>20</td>
</tr>
<tr>
<td>Tanzu Basic</td>
<td></td>
<td></td>
<td></td>
<td>Avg Number of Cores</td>
<td>6</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> The report above shows both the vRAM and CPU cores usage are detected by Usage Meter. This could mean that the Usage Meter administrator has registered a single Tanzu Basic enabled vCenter and switched between the vRAM metric and CPU core metric during the metering period. Multiple vCenters with different metering metrics registered to the Usage Meter cloud also produce two-line items in the report. If the same metric is selected during the entire metering period for all vCenters registered in the Usage Meter, only one-line item with the selected metric will be shown in the report.</p>
<h3 id=virtual-machine-history-report>
Virtual Machine History Report:
<a class=anchor href=#virtual-machine-history-report>#</a>
</h3>
<p>The column &ldquo;vmType&rdquo; is included in the Virtual Machine History report indicating the types of VMs in the report:</p>
<table>
<thead>
<tr>
<th><strong>vmType</strong></th>
<th><strong>Translation</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>SUP</td>
<td>Supervisor VM</td>
</tr>
<tr>
<td>POD</td>
<td>POD VM</td>
</tr>
<tr>
<td>TKG</td>
<td>VMs created by vSphere Tanzu Kubernetes Grid service</td>
</tr>
<tr>
<td>OTHERS</td>
<td>VMs that are not categorized as SUP, POD or TKG</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> Tanzu will not be shown in &ldquo;associated products&rdquo; on the vCenter registration and management page even if detected by Usage Meter.</p>
</article>
<footer class=book-footer>
<div class="flex flex-wrap justify-between">
</div>
<script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>
</footer>
<div class=book-comments>
</div>
<label for=menu-control class="hidden book-menu-overlay"></label>
</div>
</main>
</body>
</html>