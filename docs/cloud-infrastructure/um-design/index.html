<!doctype html><html lang=en-us dir=ltr>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="VMware vCloud Usage Meter Design #  Detailed design information for Usage Meter goes here.
Deployment model #  vCloud Usage Meter is deployed as an OVA file through vSphere. It must be registered with a VCPP contract (Rental or Sovereign Cloud) to complete its configuration. 1 vCloud Usage Meter can be registered with only 1 VCPP contract. A single VCPP contract can have many registered vCloud Usage Meters. Usage Meter can also be registered with a provider org&rsquo;s site.">
<meta name=theme-color content="#FFFFFF">
<meta name=color-scheme content="light dark"><meta property="og:title" content="VMware vCloud Usage Meter Design">
<meta property="og:description" content="VMware vCloud Usage Meter Design #  Detailed design information for Usage Meter goes here.
Deployment model #  vCloud Usage Meter is deployed as an OVA file through vSphere. It must be registered with a VCPP contract (Rental or Sovereign Cloud) to complete its configuration. 1 vCloud Usage Meter can be registered with only 1 VCPP contract. A single VCPP contract can have many registered vCloud Usage Meters. Usage Meter can also be registered with a provider org&rsquo;s site.">
<meta property="og:type" content="article">
<meta property="og:url" content="http://vcpat.cloudhappens.io/docs/cloud-infrastructure/um-design/"><meta property="article:section" content="docs">
<meta property="article:modified_time" content="2023-10-16T09:54:29+03:00">
<title>VMware vCloud Usage Meter Design | VMware Cloud Provider Architecture Toolkit</title>
<link rel=manifest href=/manifest.json>
<link rel=icon href=/favicon.png type=image/x-icon>
<link rel=stylesheet href=/book.min.82c5dbd23447cee0b4c2aa3ed08ce0961faa40e1fa370eee4f8c9f02e0d46b5f.css integrity="sha256-gsXb0jRHzuC0wqo+0Izglh+qQOH6Nw7uT4yfAuDUa18=" crossorigin=anonymous>
<script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.58054b8ffbab66129e1e24f722725efd3ed94cbb66aebf46d9149b8e4e5147c8.js integrity="sha256-WAVLj/urZhKeHiT3InJe/T7ZTLtmrr9G2RSbjk5RR8g=" crossorigin=anonymous></script>
</head>
<body dir=ltr>
<input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control>
<main class="container flex">
<aside class=book-menu>
<div class=book-menu-content>
<nav>
<h2 class=book-brand>
<a class="flex align-center" href=/><span>VMware Cloud Provider Architecture Toolkit</span>
</a>
</h2>
<div class=book-search>
<input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/>
<div class="book-search-spinner hidden"></div>
<ul id=book-search-results></ul>
</div>
<ul>
<li><a href=/feedback/><em>Feedback</em></a></li>
</ul>
<h2 id=draft-validated-solutions>
Draft Validated Solutions:
<a class=anchor href=#draft-validated-solutions>#</a>
</h2>
<ul>
<li><a href=/docs/cloud-infrastructure/><strong>Cloud Infrastructure</strong></a>
<ul>
<li><a href=/docs/cloud-infrastructure/planning/>Planning and Preparation</a></li>
<li><a href=/docs/cloud-infrastructure/design/>Design Objectives</a></li>
<li><a href=/docs/cloud-infrastructure/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/cloud-infrastructure/implementation/>Implementation</a></li>
<li><a href=/docs/cloud-infrastructure/operations/>Operational Guidance</a></li>
<li><a href=/docs/cloud-infrastructure/design-decisions/>Design Decisions</a></li>
<li><a href=/docs/cloud-infrastructure/solution-interop/>Solution Interoperability</a></li>
<li><a href=/docs/cloud-infrastructure/appendix/>Appendix</a></li>
</ul>
</li>
<li><a href=/docs/dr-migration/><strong>DR and Migration</strong></a>
<ul>
<li><a href=/docs/dr-migration/planning/>Planning and Preparation</a></li>
<li><a href=/docs/dr-migration/design/>Design Objectives</a></li>
<li><a href=/docs/dr-migration/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/dr-migration/implementation/>Implementation</a></li>
<li><a href=/docs/dr-migration/operations/>Operational Guidance</a></li>
</ul>
</li>
<li><a href=/docs/developer-ready-cloud/><strong>Developer Ready Cloud</strong></a>
<ul>
<li><a href=/docs/developer-ready-cloud/planning/>Planning and Preparation</a></li>
<li><a href=/docs/developer-ready-cloud/design/>Design Objectives</a></li>
<li><a href=/docs/developer-ready-cloud/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/developer-ready-cloud/implementation/>Implementation</a></li>
<li><a href=/docs/developer-ready-cloud/operations/>Operational Guidance</a></li>
</ul>
</li>
<li><a href=/docs/sovereign-cloud/><strong>Sovereign Cloud</strong></a>
<ul>
<li><a href=/docs/sovereign-cloud/planning/>Planning and Preparation</a></li>
<li><a href=/docs/sovereign-cloud/design/>Design Objectives</a></li>
<li><a href=/docs/sovereign-cloud/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/sovereign-cloud/implementation/>Implementation</a></li>
<li><a href=/docs/sovereign-cloud/operations/>Operational Guidance</a></li>
</ul>
</li>
<li><a href=/docs/networking-security/><strong>Networking and Security</strong></a>
<ul>
<li><a href=/docs/networking-security/planning/>Planning and Preparation</a></li>
<li><a href=/docs/networking-security/design/>Design Objectives</a></li>
<li><a href=/docs/networking-security/detailed-design/>Detailed Design</a></li>
<li><a href=/docs/networking-security/implementation/>Implementation</a></li>
<li><a href=/docs/networking-security/operations/>Operational Guidance</a></li>
</ul>
</li>
</ul>
<h2 id=toolkit-documents>
Toolkit Documents:
<a class=anchor href=#toolkit-documents>#</a>
</h2>
<ul>
<li><strong>VMware Cloud Provider Lifecycle Manager</strong></li>
<li><a href=/docs/cloud-director/><strong>VMware Cloud Director</strong></a>
<ul>
<li>Automation</li>
<li>Branding & Themes</li>
<li>Extensibility</li>
<li><a href=/docs/cloud-director/identity-access/>Identity & Access</a></li>
<li>Multi-site</li>
<li>Networking</li>
<li>Scale</li>
<li>Security</li>
</ul>
</li>
<li><strong>VMware Cloud Director service</strong>
<ul>
<li><a href=/docs/cloud-director-service/implementation/>Implementation</a></li>
</ul>
</li>
<li><strong>VMware Cloud Director Availability</strong></li>
<li><strong>VMware vCloud Usage Meter</strong></li>
<li><strong>VMware Cloud Director Container Service Extension</strong></li>
<li><strong>VMware Cloud Director Oject Storage Extension</strong></li>
<li><strong>VMware Cloud Director Application Launchpad</strong>
<br></li>
</ul>
<ul>
<li>
<a href=https://cloudsolutions.vmware.com target=_blank rel=noopener>
VMware Cloud Solutions
</a>
</li>
</ul>
</nav>
<script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>
</div>
</aside>
<div class=book-page>
<header class=book-header>
<div class="flex align-center justify-between">
<label for=menu-control>
<img src=/svg/menu.svg class=book-icon alt=Menu>
</label>
<strong>VMware vCloud Usage Meter Design</strong>
<label for=toc-control>
</label>
</div>
</header>
<article class=markdown><h1 id=vmware-vcloud-usage-meter-design>
VMware vCloud Usage Meter Design
<a class=anchor href=#vmware-vcloud-usage-meter-design>#</a>
</h1>
<p>Detailed design information for Usage Meter goes here.</p>
<h2 id=deployment-model>
Deployment model
<a class=anchor href=#deployment-model>#</a>
</h2>
<p>vCloud Usage Meter is deployed as an OVA file through vSphere. It must be registered with a VCPP contract (Rental or Sovereign Cloud) to complete its configuration. 1 vCloud Usage Meter can be registered with only 1 VCPP contract. A single VCPP contract can have many registered vCloud Usage Meters. Usage Meter can also be registered with a provider org&rsquo;s site.</p>
<p>To collect accurate usage data, vCloud Usage Meter requires a specific configuration of the metered vCenter Server instances. To access the vCloud Usage Meter Web interface, you must allow access on the appropriate TCP ports.</p>
<h3 id=vcenter-server-clusters>
vCenter Server Clusters
<a class=anchor href=#vcenter-server-clusters>#</a>
</h3>
<p>Service providers normally host customer and administrative virtual machines on a single vCenter Server instance. Tenants consume compute resources from the customer virtual machines, whereas service providers use the administrative virtual machines for internal purposes. To ensure accurate reporting to service providers and to VMware, you must apply a degree of separation between customer and administrative virtual machines. The best practice is to create a dedicated cluster for each type. For example, create a Customer cluster to host all customer virtual machines and a Management cluster to host all virtual machines that are vital to the service provider business operations. The separation of the virtual machines based on their function, ensures that vCloud Usage Meter reports do not contain mixed usage data of customer and administrative virtual machines.</p>
<h3 id=esxi-licenses>
ESXi Licenses
<a class=anchor href=#esxi-licenses>#</a>
</h3>
<p>After you create dedicated clusters for the virtual machines based on their functions, you must assign proper ESXi licenses to the cluster hosts.</p>
<h3 id=tcp-ports>
TCP Ports
<a class=anchor href=#tcp-ports>#</a>
</h3>
<p>vCloud Usage Meter uses predefined TCP ports. If you manage network components from outside a firewall, you might need to configure the firewall to allow access to the appropriate ports. For information about the ports that vCloud Usage Meter requires, see VMware Ports and Protocols.</p>
<p>VMware Ports and Protocols</p>
<table>
<thead>
<tr>
<th>Product</th>
<th>Releases</th>
<th>Port</th>
<th>Protocol</th>
<th>Source</th>
<th>Destination</th>
<th>Service Description</th>
<th>Purpose</th>
<th>Classification</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>vCloud Usage Meter</td>
<td>4.3, 4.4, 4.5, 4.6</td>
<td>22</td>
<td>SSH</td>
<td>Platform</td>
<td>UM Appliance</td>
<td>Usage Meter agent access. User/Password or SSH key-based authentication.</td>
<td>Inbound communication port for Usage Meter to login using SSH</td>
<td>SSL Enabled</td>
<td></td>
</tr>
<tr>
<td>vCloud Usage Meter</td>
<td>4.3, 4.4, 4.5, 4.6</td>
<td>443</td>
<td>HTTPS</td>
<td>UM Appliance</td>
<td>ums.cloud.vmware.com</td>
<td>Outbound communication to VMware Cloud</td>
<td>Sending Usage Data to VMware cloud</td>
<td>Sensitive and SSL Enabled</td>
<td></td>
</tr>
<tr>
<td>vCloud Usage Meter</td>
<td>4.3, 4.4, 4.5, 4.6</td>
<td>Proxy server port</td>
<td>HTTPS</td>
<td></td>
<td></td>
<td>Serves requests from proxy and sends commands to proxy</td>
<td>Communication port for proxy connection</td>
<td>Sensitive and SSL Enabled</td>
<td></td>
</tr>
<tr>
<td>vCloud Usage Meter</td>
<td>4.3, 4.4, 4.5, 4.6</td>
<td>443</td>
<td>TCP</td>
<td>UM Appliance</td>
<td>All Metered Products</td>
<td>Default port to access products and execute API</td>
<td>To access products and execute API commands</td>
<td></td>
<td></td>
</tr>
<tr>
<td>vCloud Usage Meter</td>
<td>4.3, 4.4, 4.5, 4.6</td>
<td>8443</td>
<td>HTTPS</td>
<td>Platform</td>
<td>UM Appliance</td>
<td>API access and communication with Usage Meter. SSL channel encrypted with 2048 RSA key based SHA2 cert.</td>
<td>Inbound communication port for Usage Meter</td>
<td>Sensitive and SSL Enabled</td>
<td></td>
</tr>
<tr>
<td>vCloud Usage Meter</td>
<td>4.3, 4.4, 4.5, 4.6</td>
<td>7444</td>
<td>TCP</td>
<td>UM Appliance</td>
<td>Product PSC server for vCenter Lookup service</td>
<td>Default port to access PSC server product and execute API</td>
<td>To access PSC server product and execute API</td>
<td>API calls, Authentication</td>
<td></td>
</tr>
<tr>
<td>vCloud Usage Meter</td>
<td>4.3, 4.4, 4.5, 4.6</td>
<td>8443</td>
<td>TCP</td>
<td>Client browser</td>
<td>vCloud Usage Meter</td>
<td>Used for the Web application.</td>
<td>vCloud Usage Meter UI</td>
<td>Used for the Web application.</td>
<td></td>
</tr>
<tr>
<td>vCloud Usage Meter</td>
<td>4.5, 4.6</td>
<td>5480</td>
<td>TCP</td>
<td>Client Browser</td>
<td>Virtual Appliance Management Interface (VAMI)</td>
<td>Used for VAMI Web application</td>
<td>To access VAMI UI.</td>
<td>URL access</td>
<td></td>
</tr>
<tr>
<td>vCloud Usage Meter</td>
<td>4.3, 4.4, 4.5, 4.6</td>
<td>80, 8080, 443</td>
<td>TCP</td>
<td>Client Browser</td>
<td>UM Appliance</td>
<td>Accepts HTTP connections and upgrades them to HTTPS connections on port 443. This port is optional and is not required to be open if you connect over HTTPS exclusively</td>
<td>HTTPS access to web UI or HTTPS upgrade for Usage Meter web UI</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id=design-decisions>
Design decisions
<a class=anchor href=#design-decisions>#</a>
</h2>
<p>vCloud Usage Meter is a virtual appliance that you deploy with vSphere Web Client. To set up the virtual appliance, you must set the required passwords, configure your network, and add a vCenter Server instance for metering.</p>
<p>To manage who can use the application, you can set up an LDAP authentication.</p>
<p>The size of your data set and the vCenter Server inventories that vCloud Usage Meter meters affect the speed of a consumption data collection. For large data sets and vCenter Server inventories, consider deploying more than one vCloud Usage Meter appliances. You can consolidate the reported data from multiple virtual appliances in monthly reports to your VMware Cloud Provider Program aggregator.</p>
<p>To avoid configuration problems and ensure accurate metering of products, you must synchronize the vCloud Usage Meter date and time with the date and time of the metered products. As a best practice, use the same NTP server for the vCloud Usage Meter appliance and the metered products.</p>
<h2 id=sizing>
Sizing
<a class=anchor href=#sizing>#</a>
</h2>
<p>vCloud Usage Meter requires the following hardware resources.</p>
<ul>
<li>Two virtual CPU cores</li>
<li>12 GB of memory</li>
<li>80 GB storage</li>
</ul>
<p>Download the vCloud Usage Meter OVA file from the <a href=https://customerconnect.vmware.com>VMware Customer Connect</a> download product page and save it locally.</p>
<p>Verify that you have access and sufficient privileges to deploy an OVA file with vSphere Web Client.</p>
</article>
<footer class=book-footer>
<div class="flex flex-wrap justify-between">
</div>
<script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>
</footer>
<div class=book-comments>
</div>
<label for=menu-control class="hidden book-menu-overlay"></label>
</div>
</main>
</body>
</html>